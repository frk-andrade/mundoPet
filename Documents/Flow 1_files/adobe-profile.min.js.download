
/*! adobe-profile - v1.1.15 - 02-01-2022, 10:00:00 AM

ADOBE CONFIDENTIAL
==================
Copyright 2022 Adobe Systems Incorporated
All Rights Reserved.

NOTICE: All information contained herein is, and remains
the property of Adobe Systems Incorporated and its suppliers,
if any. The intellectual and technical concepts contained
herein are proprietary to Adobe Systems Incorporated and its
suppliers and are protected by trade secret or copyright law.
Dissemination of this information or reproduction of this material
is strictly forbidden unless prior written permission is obtained
from Adobe Systems Incorporated.
*/

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

!function(){var e,t,n,a,r,i,o,s,l,c,u,f,d,p;e=function(){var e={},t="adobeProfile";return e.strings={id:t,debug:t+"Debug",ellipsis:"...",localLink:"local link",hashtag:"#"},e.events={data_ready:t+":DataReady",profile_ready:t+":ProfileReady",sign_out:t+":SignOut"},e.messages={config:"config",storage:"storage",no_config:"PE01",no_target:"PE02",request_error:"PE03 {0}",profile_data_missing:"PW01 {0}",request_data:"PL01 {0}",profile_data:"PL02",profile_labels:"PL03",build_profile:"PL04",locale:"PL05 {0}",custom_theme:"PL06 {0}",custom_class:"PL07 {0}",custom_behance:"PL08 {0}",format_name:"PL09 {0}",format_email:"PL10 {0}; {1}",build_events:"PL11",method_executed:"PL12 {0}, {1}",imslib:"imslib error"},e.endpoints={profile:'https://cc-collab.adobe.io/profile',locales:'//wwwimages2.adobe.com/services/globalnav.json',account:'//account.adobe.com?lang={0}',accountProfile:'//account.adobe.com/profile?lang={0}'},e.profile={requiredProperties:["id","first_name","last_name","email","avatar"],defaultAvatar:"https://a3.behance.net/img/profile/no-image-138.jpg"},e.analytics={timeout:601},e}(),t=function(){var e={};return e.isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},e.isFunction=function(e){return"function"==typeof e},e.formatString=function(e,t){if("string"==typeof e&&Array.isArray(t)&&t.length)return e.replace(/{(\d+)}/g,function(e,n){return"undefined"!=typeof t[n]?t[n]:e})},e.getPropertySafely=function(e,t){var n,a,r;if(e&&"object"==typeof e&&!Array.isArray(e)&&"string"==typeof t&&Object.keys(e).length&&t.length){for(t=t.split("."),a=t.length,r=e,n=0;n<a;n++){if(!r.hasOwnProperty(t[n]))return;r=r[t[n]]}return r}},e}(),n=function(e){function t(e,t){var n;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!1,!1,t)),window.dispatchEvent(n)}function n(){return"object"==typeof window.adobeIMS}function a(){var e=n()&&window.adobeIMS.version;return"string"==typeof e&&0===e.indexOf("v2")}function r(){var t=!1;return t=a()&&e.isFunction(window.adobeIMS.isSignedInUser)?window.adobeIMS.isSignedInUser():!e.isEmptyObject(window.adobeIMS.isSignedInUser())}function i(){var t=null;return r()&&e.isFunction(window.adobeIMS.getAccessToken)&&(t=a()?window.adobeIMS.getAccessToken().token:window.adobeIMS.getAccessToken()),t}function o(){return new Promise(function(e,n){function i(t){var a=t.detail.instance;"object"==typeof a&&"object"==typeof a.adobeIdData&&a.adobeIdData.client_id===window.adobeid.client_id?(window.removeEventListener("onImsLibInstance",i),e(a.getProfile())):n()}r()?a()?(window.addEventListener("onImsLibInstance",i),t("getImsLibInstance",null)):e(window.adobeIMS.getUserProfile()):n()})}function s(){window.adobeIMS.signOut.call(window.adobeIMS)}function l(t){r()&&(a()?window.adobeIMS.refreshToken().then(function(n){e.isFunction(t)&&t(n)}).catch(function(){}):window.adobeIMS.acquireAccessToken(e.isFunction(t)?t:void 0))}return{isSignedInUser:r,getAccessToken:i,getProfile:o,refreshToken:l,signOut:s}}(t),a=function(e){var t={};return t.get=function(t){var n=new XMLHttpRequest;return n.open("GET",t.endpoint,!0),t.headers&&!e.isEmptyObject(t.headers)&&Object.keys(t.headers).forEach(function(e){n.setRequestHeader(e,t.headers[e])}),n.onload=function(){this.status>=200&&this.status<400?t.success&&e.isFunction(t.success)&&t.success(this.response):t.error&&e.isFunction(t.error)&&t.error(this.response)},n.onerror=function(){t.error&&e.isFunction(t.error)&&t.error(this.response)},n.send(),this},t}(t),r=function(e){var t={};return t.Events=function(){var t={};this.addEventListener=function(e,n){var a=t[e]||[];a.push(n),t[e]=a},this.dispatchEvent=function(n,a){var r,i,o=t[n];if(o)for(i=0,r=o.length;i<r;++i)e.isFunction(o[i])&&o[i].apply(null,[a,n])}},t.matches=function(e,t){var n,a,r;return e&&t?"function"!=typeof window.Element.prototype.matches?(n=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){a=(this.document||this.ownerDocument).querySelectorAll(e),r=a.length;do--r;while(r>=0&&a.item(r)!==this);return r>-1},n.apply(e,[t])):e.matches(t):null},t.closest=function(e,t){if(!e||!t)return null;if("function"!=typeof window.Element.prototype.closest){for(;e&&1===e.nodeType;){if(this.matches(e,t))return e;e=e.parentNode}return null}return e.closest(t)},t.isInteger=function(e){var t;return t="function"==typeof Number.isInteger?Number.isInteger:function(e){return"number"==typeof e&&window.isFinite(e)&&Math.floor(e)===e},t.apply(null,[e])},t}(t),i=function(e,t){var n={},a=document.createElement("canvas");return n.getElementProperties=function(e,t){var n,a,r,i={};if(!e||!t)return null;for(t=Array.isArray(t)?t:[t],n=t.length,a=0;a<n;a++)r=t[a],"string"==typeof r&&(i[r]=window.getComputedStyle(e)[r]);return i},n.measure=function(t,n){var r;return t&&n?(r=a.getContext("2d"),r.font=e.formatString("{0} {1} {2}",[n["font-weight"],n["font-size"],n["font-family"]]),r.measureText(t.trim()).width):null},n.truncateEmail=function(n,a,r){var i=!1,o=!1;if(!n||!a||!r)return null;for(;this.measure(e.formatString("{0}@{1}",[n,a]),r)>parseFloat(r.width);)n.length>=a.length&&(n=e.formatString("{0}{1}",[n.slice(0,i?-4:-1),t.strings.ellipsis]),i=!0),n.length<=a.length&&(a=e.formatString("{0}{1}",[a.slice(0,o?-4:-1),t.strings.ellipsis]),o=!0);return e.formatString("{0}@{1}",[n,a])},n}(t,e),o=function(e,t){var n=function(e){this.debug=e};return n.prototype.message=function(){var e,n=[t.strings.debug+":"],a=arguments.length;for(e=0;e<a;e++)n.push(arguments[e]);return n.concat()},n.prototype.log=function(){this.debug&&window.console&&e.isFunction(window.console.log)&&window.console.log.apply(null,this.message.apply(null,arguments))},n.prototype.warn=function(){this.debug&&window.console&&e.isFunction(window.console.warn)&&window.console.warn.apply(null,this.message.apply(null,arguments))},n.prototype.error=function(){this.debug&&window.console&&e.isFunction(window.console.error)&&window.console.error.apply(null,this.message.apply(null,arguments))},n}(t,e),s=function(){var e={},t=["ae_ar","ae_en","africa","at","au","be_en","be_fr","be_nl","bg","br","ca","ca_fr","ch_de","ch_fr","ch_it","cis_en","cis_ru","cl","cn","cy_en","cz","de","dk","eeurope","ee","en","es","fi","fr","gr_en","hk_en","hk_zh","hr","hu","ie","il_en","il_he","in","it","jp","kr","la","lt","lu_de","lu_en","lu_fr","lv","mena_ar","mena_en","mena_fr","mt","mx","nl","no","nz","pl","pt","ro","rs","ru","sa_ar","sa_en","se","sea","sg","si","sk","th_en","th_th","tr","tw","ua","uk"];return e.getLocales=function(){return t},e.isMatch=function(e){return!(!e||"string"!=typeof e)&&t.indexOf(e.toLowerCase())>-1},e.getDefault=function(){return"en"},e}(),l=function(e){var t={},n={};return t.capitalizeFirstLetter=function(e){return"string"==typeof e?e.charAt(0).toUpperCase()+e.slice(1):e},t.getTypes=function(e){if("string"==typeof e||e instanceof Array)return"string"==typeof e?[e]:e},t.doesValueMatchType=function(n,a){return!!("undefined"!=typeof n&&""!==n&&a&&!e.isEmptyObject(a)&&a instanceof Array)&&a.some(function(a){var r=n instanceof Object,i=r&&!e.isEmptyObject(n)&&n instanceof window[t.capitalizeFirstLetter(a)],o=!i&&!!n&&typeof n===a,s=!o&&!!n&&new RegExp(a).test(n);return!!(i||o||s)})},n.isValid=function(n,a){var r=!0;return!e.isEmptyObject(n)&&!e.isEmptyObject(a)&&(e.isEmptyObject(a.mandatory)||(r=Object.keys(a.mandatory).every(function(e){var r=t.getTypes(a.mandatory[e]);return!!n.hasOwnProperty(e)&&t.doesValueMatchType(n[e],r)})),r&&!e.isEmptyObject(a.optional)&&(r=Object.keys(a.optional).every(function(e){var r=t.getTypes(a.optional[e]);return!n.hasOwnProperty(e)||t.doesValueMatchType(n[e],r)})),r)},n}(t),c=function(){var e={};return e.isIE=function(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1},e}(),u=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,UP:38,DOWN:40}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):f=function(e){return"function"==typeof t?t(e):t}({})}(this,function(e){function t(e){return"function"==typeof e}function n(e){return g(e)?"array":typeof e}function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(e,t){return null!=e&&"object"==typeof e&&t in e}function i(e,t){return h.call(e,t)}function o(e){return!i(y,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return v[e]})}function l(t,n){function r(){if(y&&!v)for(;h.length;)delete m[h.pop()];else h=[];y=!1,v=!1}function i(e){if("string"==typeof e&&(e=e.split(w,2)),!g(e)||2!==e.length)throw new Error("Invalid tags: "+e);s=new RegExp(a(e[0])+"\\s*"),l=new RegExp("\\s*"+a(e[1])),d=new RegExp("\\s*"+a("}"+e[1]))}if(!t)return[];var s,l,d,p=[],m=[],h=[],y=!1,v=!1;i(n||e.tags);for(var _,L,S,x,M,A,T=new f(t);!T.eos();){if(_=T.pos,S=T.scanUntil(s))for(var D=0,I=S.length;D<I;++D)x=S.charAt(D),o(x)?h.push(m.length):v=!0,m.push(["text",x,_,_+1]),_+=1,"\n"===x&&r();if(!T.scan(s))break;if(y=!0,L=T.scan(E)||"name",T.scan(b),"="===L?(S=T.scanUntil(P),T.scan(P),T.scanUntil(l)):"{"===L?(S=T.scanUntil(d),T.scan(k),T.scanUntil(l),L="&"):S=T.scanUntil(l),!T.scan(l))throw new Error("Unclosed tag at "+T.pos);if(M=[L,S,_,T.pos],m.push(M),"#"===L||"^"===L)p.push(M);else if("/"===L){if(A=p.pop(),!A)throw new Error('Unopened section "'+S+'" at '+_);if(A[1]!==S)throw new Error('Unclosed section "'+A[1]+'" at '+_)}else"name"===L||"{"===L||"&"===L?v=!0:"="===L&&i(S)}if(A=p.pop())throw new Error('Unclosed section "'+A[1]+'" at '+T.pos);return u(c(m))}function c(e){for(var t,n,a=[],r=0,i=e.length;r<i;++r)t=e[r],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(a.push(t),n=t));return a}function u(e){for(var t,n,a=[],r=a,i=[],o=0,s=e.length;o<s;++o)switch(t=e[o],t[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":n=i.pop(),n[5]=t[2],r=i.length>0?i[i.length-1][4]:a;break;default:r.push(t)}return a}function f(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var m=Object.prototype.toString,g=Array.isArray||function(e){return"[object Array]"===m.call(e)},h=RegExp.prototype.test,y=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,w=/\s+/,P=/\s*=/,k=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var n,a=this.cache;if(a.hasOwnProperty(e))n=a[e];else{for(var i,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(n=s.view,i=e.split("."),o=0;null!=n&&o<i.length;)o===i.length-1&&(l=r(n,i[o])),n=n[i[o++]];else n=s.view[e],l=r(s.view,e);if(l)break;s=s.parent}a[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,a=n[e];return null==a&&(a=n[e]=l(e,t)),a},p.prototype.render=function(e,t,n){var a=this.parse(e),r=t instanceof d?t:new d(t);return this.renderTokens(a,r,n,e)},p.prototype.renderTokens=function(e,t,n,a){for(var r,i,o,s="",l=0,c=e.length;l<c;++l)o=void 0,r=e[l],i=r[0],"#"===i?o=this.renderSection(r,t,n,a):"^"===i?o=this.renderInverted(r,t,n,a):">"===i?o=this.renderPartial(r,t,n,a):"&"===i?o=this.unescapedValue(r,t):"name"===i?o=this.escapedValue(r,t):"text"===i&&(o=this.rawValue(r)),void 0!==o&&(s+=o);return s},p.prototype.renderSection=function(e,n,a,r){function i(e){return o.render(e,n,a)}var o=this,s="",l=n.lookup(e[1]);if(l){if(g(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(e[4],n.push(l[c]),a,r);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],n.push(l),a,r);else if(t(l)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,r.slice(e[3],e[5]),i),null!=l&&(s+=l)}else s+=this.renderTokens(e[4],n,a,r);return s}},p.prototype.renderInverted=function(e,t,n,a){var r=t.lookup(e[1]);if(!r||g(r)&&0===r.length)return this.renderTokens(e[4],t,n,a)},p.prototype.renderPartial=function(e,n,a){if(a){var r=t(a)?a(e[1]):a[e[1]];return null!=r?this.renderTokens(this.parse(r),n,a,r):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},p.prototype.escapedValue=function(t,n){var a=n.lookup(t[1]);if(null!=a)return e.escape(a)},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var _=new p;return e.clearCache=function(){return _.clearCache()},e.parse=function(e,t){return _.parse(e,t)},e.render=function(e,t,a){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return _.render(e,t,a)},e.to_html=function(n,a,r,i){var o=e.render(n,a,r);return t(i)?void i(o):o},e.escape=s,e.Scanner=f,e.Context=d,e.Writer=p,e}),d='<div class="Profile{{#class}} {{class}}{{/class}}{{#theme}} {{theme}}{{/theme}}" data-profile="profile"><a href="#" class="Profile-thumbnail" data-profile="thumbnail" style="background-image: url({{user.avatar}});" role="button" aria-haspopup="true" aria-expanded="false" aria-label="{{user.display_name}}{{user.honorific_title}}"{{#tracking}} {{tracking.dataProperty}}="{{tracking.prefix}}{{tracking.avatar}}"{{/tracking}} data-cs-mask></a><div class="Profile-dropdown" data-profile="dropdown"><a href="{{endpoint.accountURL}}" class="Profile-header" aria-label="{{strings.v}}" data-profile="header" daa-ll="View Account"><div class="Profile-data"><p class="Profile-name" data-profile="name" data-cs-mask>{{user.display_name}}{{user.honorific_title}}</p><p class="Profile-email" data-profile="email" title="{{user.email}}" data-cs-mask>{{user.email}}</p><span class="Profile-header-cta">{{strings.v}}</span></div><div class="Profile-avatar" role="link" tabindex="0"{{#strings.l}} aria-label="{{strings.l}}"{{/strings.l}} data-profile="avatar" data-url="{{endpoint.profileURL}}" style="background-image: url({{user.avatar}});" data-cs-mask></div></a>{{#behance}}<div class="Profile-applications" data-profile="applications"><ul class="Profile-menu"><li class="Profile-menu-item"><a href="{{behance}}" class="Profile-menu-link" data-profile="behance"><div class="Profile-menu-text">{{strings.b}}</div></a></li></ul></div>{{/behance}}{{#adminTemplate}}<div class="Profile-content" data-profile="links"><ul class="Profile-menu">{{#user.teamAdmin}}<li class="Profile-menu-item"><a href="{{strings.u}}" class="Profile-menu-link" daa-ll="Manage Team"><div class="Profile-menu-text">{{strings.t}}</div></a></li>{{/user.teamAdmin}}{{#user.enterpriseAdmin}}<li class="Profile-menu-item"><a href="{{strings.w}}" class="Profile-menu-link" daa-ll="Manage Enterprise"><div class="Profile-menu-text">{{strings.e}}</div></a></li>{{/user.enterpriseAdmin}}</ul></div>{{/adminTemplate}}{{#localMenu}}<div class="Profile-localLinks-menu" data-profile="local-links"><div class="Profile-localLinks-title">{{title}}</div><ul class="Profile-menu">{{#links}}<li class="Profile-menu-item"><a href="{{#hasUrl}}{{action}}{{/hasUrl}}{{^hasUrl}}#{{/hasUrl}}" class="Profile-menu-link{{#hasClass}} {{class}}{{/hasClass}}"{{#target}} target="{{target}}" rel="noopener"{{/target}}{{#analyticsID}} id="Profile.Menu.{{analyticsID}}"{{/analyticsID}}{{#description}} aria-label="{{description}}"{{/description}} data-profile="local-link"{{#analyticsProperty}} daa-ll="{{analyticsProperty}}"{{/analyticsProperty}}><div class="Profile-menu-text">{{label}}</div></a></li>{{/links}}</ul></div>{{/localMenu}}<ul class="Profile-menu"><li class="Profile-menu-item"><a href="#" class="Profile-menu-link" data-profile="sign-out" daa-ll="Sign Out"><div class="Profile-menu-text">{{strings.s}}</div></a></li></ul></div></div>',p=function(e,t,n,a,r,i,o,s,l,c,u,f,d){var p={data:null,labels:null,locale:void 0,event:new r.Events,ready:{profileLabels:!1,profileData:!1,checked:!1,checkConstraint:function(){this.profileLabels&&this.profileData&&!this.checked&&(this.checked=!0,p.event.dispatchEvent(e.events.data_ready,p.data))}}},m=new o(window.location.search.indexOf(e.strings.debug)>-1),g={};return p.mapProfileData=function(e,t){var a=n.getPropertySafely(e,"user.avatar"),r=n.getPropertySafely(e,"sections.manage.items.team.id"),i=n.getPropertySafely(e,"sections.manage.items.enterprise.id"),o=n.getPropertySafely(e,"user.name.id"),s={};return s.id=t.userId,s.first_name=t.first_name,s.last_name=t.last_name,s.display_name=t.displayName,s.name_id=o,s.email=t.email,s.avatar=a,s.teamAdmin=!!r,s.enterpriseAdmin=!!i,s},p.mapProfileLabels=function(e){if(e&&!n.isEmptyObject(e))return e},p.expandProfile=function(){var e=document.querySelector('[data-profile="profile"]'),t=e&&e.querySelector('[data-profile="thumbnail"]');p.checkElementsExist([e,t])&&(p.isProfileExpanded()||p.executeMethodWithAnalytics({type:"render"},!0,function(){e.classList.remove("Profile-hidden"),e.classList.remove("Profile-collapsed"),e.classList.add("Profile-expanded"),t.setAttribute("aria-expanded",!0)}))},p.collapseProfile=function(){var e=document.querySelector('[data-profile="profile"]'),t=e&&e.querySelector('[data-profile="thumbnail"]');p.checkElementsExist([e,t])&&p.isProfileExpanded()&&p.executeMethodWithAnalytics({type:"hide"},!0,function(){e.classList.remove("Profile-expanded"),e.classList.add("Profile-collapsed"),t.setAttribute("aria-expanded",!1)})},p.isProfileExpanded=function(){var e=document.querySelector('[data-profile="profile"]'),t=e&&e.querySelector('[data-profile="thumbnail"]');return!!p.checkElementsExist([e,t])&&(e.classList.contains("Profile-expanded")&&"true"===t.getAttribute("aria-expanded"))},p.setProfileData=function(e){t.getProfile().then(function(t){p.data=p.mapProfileData(e,t),p.ready.profileData=!0,p.ready.checkConstraint()}).catch(function(){})},p.getProfileData=function(r,i){var o={Authorization:"Bearer "+t.getAccessToken()};c.isIE()&&(o["Cache-Control"]="no-cache",o.Pragma="no-cache",o.Expires="-1"),a.get({endpoint:e.endpoints.profile,headers:o,success:function(t){n.isFunction(r)&&r(JSON.parse(t)),m.log(e.messages.profile_data,p.data)}.bind(this),error:function(t){n.isFunction(i)&&i({user:{avatar:e.profile.defaultAvatar}}),m.error(n.formatString(e.messages.request_error,[e.endpoints.profile]))}.bind(this)})},p.getProfileLabels=function(){a.get({endpoint:n.formatString("{0}/{1}/{2}/profile.json",[e.endpoints.locales,window.location.hostname,p.locale]),success:function(t){p.labels=p.mapProfileLabels(JSON.parse(t).p),n.isEmptyObject(p.labels)?(p.ready.profileLabels=!1,m.error(n.formatString(e.messages.request_error,[e.endpoints.locales]))):(m.log(e.messages.profile_labels,p.labels),p.ready.profileLabels=!0,p.ready.checkConstraint())}.bind(this),error:function(t){p.ready.profileLabels=!1,m.error(n.formatString(e.messages.request_error,[e.endpoints.locales]))}.bind(this)})},p.checkProfileData=function(t){var a,r=e.profile.requiredProperties,i=r.length;if(!t)return!1;for(a=0;a<i;a++)if(!n.getPropertySafely(t,r[a]))return m.warn(n.formatString(e.messages.profile_data_missing,[r[a]])),!1;return!0},p.checkElementsExist=function(e){var t,n;if(!(e instanceof Array&&e.length>0))return!1;for(n=e.length,t=0;t<n;t++)if(!(e[t]instanceof HTMLElement))return!1;return!0},p.buildProfile=function(t){var a,r=t.target,i=n.getPropertySafely(t,"accountURL")||e.endpoints.account,o=n.getPropertySafely(t,"accountProfileURL")||e.endpoints.accountProfile,s=p.toAccountManagementLanguage(),l={user:p.data,strings:p.labels,class:t.class,theme:t.theme,behance:t.behanceProfile,tracking:t.tracking,localMenu:p.localMenuData,endpoint:{accountURL:n.formatString(i,[s]),profileURL:n.formatString(o,[s])}};l.adminTemplate=n.getPropertySafely(l,"user.teamAdmin")||n.getPropertySafely(l,"user.enterpriseAdmin"),"undefined"!=typeof n.getPropertySafely(l,"user.name_id")&&p.labels.h&&(l.user.honorific_title=" "+p.labels.h),m.log(e.messages.build_profile),m.log(n.formatString(e.messages.locale,[p.locale])),m.log(n.formatString(e.messages.custom_theme,[!!t.theme&&t.theme])),m.log(n.formatString(e.messages.custom_class,[!!t.class&&t.class])),m.log(n.formatString(e.messages.custom_behance,[!!t.behanceProfile])),r.insertAdjacentHTML("afterend",f.render(d,l)),r.parentNode.removeChild(r),p.formatData(),p.setEvents(),a=document.querySelector('[data-profile="profile"]'),a instanceof HTMLElement&&a.classList.add("Profile-hidden"),p.event.dispatchEvent(e.events.profile_ready),p.executeMethodWithAnalytics({type:"init"},!0,function(){})},p.setEvents=function(){var a=document.querySelector('[data-profile="profile"]'),i=a&&a.querySelector('[data-profile="dropdown"]'),o=a&&a.querySelector('[data-profile="thumbnail"]'),s=a&&a.querySelector('[data-profile="header"]'),l=a&&a.querySelector('[data-profile="sign-out"]'),c=a&&a.querySelector('[data-profile="local-links"]'),u=a&&a.querySelector('[data-profile="behance"]'),f=!1,d=!1;p.checkElementsExist([a,i,o,s,l])&&(m.log(e.messages.build_events),p.initKeyboardNavigation(),document.addEventListener("click",function(e){!r.closest(e.target,'[data-profile="profile"]')&&p.isProfileExpanded()&&p.collapseProfile()}),i.addEventListener("animationend",function(e){a.classList.contains("Profile-collapsed")&&a.classList.add("Profile-hidden")}),o.addEventListener("click",function(e){e.preventDefault(),p.isProfileExpanded()?p.collapseProfile():p.expandProfile(),p.focusedLinkIndex=0}),s.addEventListener("click",function(e){var t;"avatar"===e.target.getAttribute("data-profile")?(t=e.target.getAttribute("data-url"),t&&""!==t&&(e.preventDefault(),p.executeMethodWithAnalytics({type:"click",subType:"avatar",event:e},!1,function(){window.location=t}))):p.analytics&&!n.isEmptyObject(p.analytics)&&(f="_blank"===s.getAttribute("target"),f||e.preventDefault(),p.executeMethodWithAnalytics({type:"click",subType:"account",event:e},f,function(){var e=s.getAttribute("href");f||""!==e&&(window.location=e)}))}),l.addEventListener("click",function(n){n.preventDefault(),p.event.dispatchEvent(e.events.sign_out),p.executeMethodWithAnalytics({type:"click",subType:"sign-out",event:n},!1,function(){t.signOut()})}),c instanceof HTMLElement&&c.addEventListener("click",function(t){var n=r.closest(t.target,'[data-profile="local-link"]');n instanceof HTMLElement&&(n.getAttribute("href")===e.strings.hashtag&&t.preventDefault(),p.executeMethodWithAnalytics({type:"click",subType:n.getAttribute("id")||e.strings.localLink,event:t},!1,function(){p.executeLocalLinkCallback(n,t)}))}),p.analytics&&!n.isEmptyObject(p.analytics)&&u&&u instanceof HTMLElement&&u.addEventListener("click",function(e){d="_blank"===u.getAttribute("target"),d||e.preventDefault(),p.executeMethodWithAnalytics({type:"click",subType:"behance",event:e},d,function(){var e=u.getAttribute("href");d||""!==e&&(window.location=e)})}))},p.initKeyboardNavigation=function(){function e(){p.collapseProfile(),p.focusedLinkIndex=0,l[0].focus()}function t(e){r.closest(e.target,'[tabindex="0"]')||(e.shiftKey?0!==p.focusedLinkIndex&&p.focusedLinkIndex--:p.focusedLinkIndex<l.length-1&&p.focusedLinkIndex++)}function n(){p.isProfileExpanded()?p.focusedLinkIndex<l.length-1&&p.focusedLinkIndex++:(p.expandProfile(),p.focusedLinkIndex=1),l[p.focusedLinkIndex].focus()}function a(){p.isProfileExpanded()&&(0===p.focusedLinkIndex?p.collapseProfile():p.focusedLinkIndex>0&&(p.focusedLinkIndex--,l[p.focusedLinkIndex].focus()))}function i(e){var t,n=r.closest(e.target,"a"),a=r.closest(e.target,'[tabindex="0"]'),i=a instanceof HTMLElement?a:n;i instanceof HTMLElement&&(t=r.closest(i,'[data-profile="profile"]'),t&&i.click())}function o(e){var t,n=r.closest(e.target,'[tabindex="0"]');n instanceof HTMLElement&&(t=r.closest(n,'[data-profile="profile"]'),t&&n.click())}var s=document.querySelector('[data-profile="profile"]'),l=s instanceof HTMLElement&&s.querySelectorAll("a");l instanceof NodeList&&(p.focusedLinkIndex=0,s.addEventListener("keydown",function(r){switch(r.keyCode){case u.ESC:e();break;case u.TAB:t(r);break;case u.DOWN:r.preventDefault(),n();break;case u.UP:r.preventDefault(),a();break;case u.SPACE:r.preventDefault(),i(r);break;case u.RETURN:o(r)}}))},p.formatData=function(){var t,a,r,o,s,l,c,u=document.querySelector('[data-profile="profile"]'),f=u instanceof HTMLElement&&u.classList.contains("Profile-hidden"),d=u instanceof HTMLElement&&u.querySelector('[data-profile="email"]'),g=u instanceof HTMLElement&&u.querySelector('[data-profile="name"]');p.checkElementsExist([u,d,g])&&(f&&u.classList.add("Profile-invisible"),t=d.textContent.trim(),a=i.getElementProperties(d,["width","font-family","font-size","font-weight"]),r=g.textContent.trim(),g.classList.remove("Profile-name_long"),o=i.getElementProperties(g,["width","font-family","font-size","font-weight"]),i.measure(t,a)>parseFloat(a.width)&&(c=t.split("@"),s=c[0],l=c[1],m.log(n.formatString(e.messages.format_email,[t,i.truncateEmail(s,l,a)])),d.textContent=i.truncateEmail(s,l,a)),i.measure(r,o)>parseFloat(o.width)&&(m.log(n.formatString(e.messages.format_name,[r])),g.classList.add("Profile-name_long")),f&&u.classList.remove("Profile-invisible"))},p.exportEvents=function(){g.events=e.events},p.updateUserProfileData=function(e){t.isSignedInUser()&&t.refreshToken(function(){t.getProfile().then(function(t){t&&n.isFunction(e)&&e(t)})})},p.updateUserProfileDisplay=function(e){var t=document.querySelector('[data-profile="profile"]'),n=t instanceof HTMLElement&&t.querySelector('[data-profile="email"]'),a=t instanceof HTMLElement&&t.querySelector('[data-profile="name"]');"object"==typeof e&&"object"==typeof p.data&&n instanceof HTMLElement&&a instanceof HTMLElement&&(p.data.email=e.email,p.data.first_name=e.first_name,p.data.last_name=e.last_name,p.data.display_name=e.displayName,n.textContent=e.email,a.textContent=e.displayName,p.formatData())},p.updateUserProfile=function(){p.updateUserProfileData(p.updateUserProfileDisplay)},p.updateUserAvatarData=function(e){function a(t){r=n.getPropertySafely(t,"user.avatar"),r&&n.isFunction(e)&&e(r)}var r;t.isSignedInUser()&&p.getProfileData(a,a)},p.updateUserAvatarDisplay=function(e){var t=document.querySelector('[data-profile="profile"]'),n=t instanceof HTMLElement&&t.querySelector('[data-profile="thumbnail"]'),a=t instanceof HTMLElement&&t.querySelector('[data-profile="avatar"]');"string"==typeof e&&"object"==typeof p.data&&n instanceof HTMLElement&&a instanceof HTMLElement&&(p.data.avatar=e,n.style.backgroundImage="url("+e+")",a.style.backgroundImage="url("+e+")")},p.updateUserAvatar=function(){p.updateUserAvatarData(p.updateUserAvatarDisplay)},p.update=function(){function e(){!a&&t&&n&&(a=!0,p.updateUserProfileDisplay(t),p.updateUserAvatarDisplay(n))}var t,n,a=!1;p.updateUserProfileData(function(n){t=n,e()}),p.updateUserAvatarData(function(t){n=t,e()})},p.toAccountManagementLanguage=function(){var e=s.getDefault(),t={africa:"en",at:"de",au:"en",be_en:"en",be_fr:"fr",be_nl:"nl",bg:"bg",br:"pt",ca:"en",ca_fr:"fr",ch_de:"de",ch_fr:"fr",ch_it:"it",cis_en:"en",cis_ru:"ru",cn:"zh_CN",cy_en:"en",cz:"cs",de:"de",dk:"da",eeurope:"en",ee:"et",en:"en",es:"es",fi:"fi",fr:"fr",gr_en:"en",hk_en:"en",hk_zh:"zh_TW",hr:"hr",hu:"hu",ie:"en",il_en:"en",il_he:"he",in:"en",it:"it",jp:"ja",kr:"ko",la:"es",lt:"lt",lu_de:"de",lu_en:"en",lu_fr:"fr",lv:"lv",mena_ar:"ar",mena_en:"en",mena_fr:"fr",mt:"en",mx:"es",nl:"nl",no:"nb",nz:"en",pl:"pl",pt:"pt",ro:"ro",rs:"sr",ru:"ru",se:"sv",sea:"en",sg:"en",si:"sl",sk:"sk",tr:"tr",tw:"zh_TW",ua:"ua",uk:"en"};return s.isMatch(p.locale)?(t[p.locale]&&(e=t[p.locale]),e):e},p.executeLocalLinkCallback=function(e,t){var a,i,o;e instanceof HTMLElement&&(a=r.closest(e,"li"),i=r.closest(e,"ul"),a instanceof HTMLElement&&i instanceof HTMLElement&&i.childNodes instanceof NodeList&&(o=Array.prototype.indexOf.call(i.childNodes,a))),"number"==typeof o&&o>-1&&!n.isEmptyObject(p.localMenuData)&&n.isFunction(p.localMenuData.links[o].action)&&t instanceof Event&&(t.preventDefault(),p.localMenuData.links[o].action())},p.isLocalMenuDataValid=function(e){var t;return t=l.isValid(e,{mandatory:{title:"string",links:"array"}}),t&&(t=e.links.every(function(e){return l.isValid(e,{mandatory:{label:"string",action:["string","function"]},optional:{description:"string",class:"string",target:"^_\\w+$",analyticsID:"string"}})})),t},p.mapLocalMenuData=function(e){if(e&&!n.isEmptyObject(e)){if(e.links instanceof Array&&e.links.length>0&&(e.links=e.links.slice(0,7)),p.isLocalMenuDataValid(e))return e.links.forEach(function(e){"string"==typeof e.action&&(e.hasUrl=!0),"string"==typeof e.class&&e.class.length&&(e.hasClass=!0);try{e.analyticsProperty=e.label.replace(/\s/g,"_")}catch(e){}}),e;m.warn("localMenu config is not valid")}},p.setupCustomAnalytics=function(t){var a,i;t.analytics&&!n.isEmptyObject(t.analytics)&&(a=parseInt(t.analytics.timeout,10),i=n.isFunction(t.analytics.callback)?t.analytics.callback:void 0,r.isInteger(a)&&"undefined"!=typeof i&&(p.analytics={callback:i,timeout:a<e.analytics.timeout?a:e.analytics.timeout}))},p.executeMethodWithAnalytics=function(t,a,r){function i(t){s||(r(),s=!0,m.log(n.formatString(e.messages.method_executed,[r.name,t])))}var o,s=!1;n.isEmptyObject(p.analytics)?i(0):(a?i(1):o=setTimeout(function(){i(2)},p.analytics.timeout),p.analytics.callback.apply(null,[t,function(){i(3),clearTimeout(o)}]))},g.init=function(t){var a,r;return!t||n.isEmptyObject(t)?void m.error(e.messages.no_config):t.target&&t.target instanceof HTMLElement?n.isEmptyObject(window.adobeIMS)?void m.error(e.messages.imslib):(t.locale&&s.isMatch(t.locale)||(t.locale=s.getDefault()),p.locale=t.locale,a=t.data||p.data,r=p.mapProfileLabels(t.labels)||p.labels,p.localMenuData=p.mapLocalMenuData(t.localMenu),p.checkProfileData(a)?(m.log(n.formatString(e.messages.request_data,[t.data?e.messages.config:e.messages.storage])),p.data=a,m.log(e.messages.profile_data,p.data),setTimeout(function(){p.ready.profileData=!0,p.ready.checkConstraint()},0)):(m.log(n.formatString(e.messages.request_data,[e.endpoints.profile])),p.getProfileData(p.setProfileData,p.setProfileData)),r&&!n.isEmptyObject(r)?(m.log(n.formatString(e.messages.request_data,[t.data?e.messages.config:e.messages.storage])),p.labels=r,m.log(e.messages.profile_labels,p.labels),setTimeout(function(){p.ready.profileLabels=!0,p.ready.checkConstraint()},0)):(m.log(n.formatString(e.messages.request_data,[e.endpoints.locales])),p.getProfileLabels()),this.addEventListener(e.events.data_ready,function(){var n,a=!1;return t.target&&t.target instanceof HTMLElement?(n=t.target.parentElement,n&&n instanceof HTMLElement||(a=!0)):a=!0,a?void m.error(e.messages.no_target):void p.buildProfile(t)}),p.setupCustomAnalytics(t),p.exportEvents(),void delete this.init):void m.error(e.messages.no_target)},g.addEventListener=function(e,t){p.event.addEventListener(e,t)},g.getUserProfile=function(){return m.log(e.messages.profile_data,p.data),p.data},g.expand=function(){p.expandProfile()},g.collapse=function(){p.collapseProfile()},g.update=function(){p.update()},g.updateProfile=function(){p.updateUserProfile()},g.updateAvatar=function(){p.updateUserAvatar()},g}(e,n,t,a,r,i,o,s,l,c,u,f,d),window.adobeProfile=p}();
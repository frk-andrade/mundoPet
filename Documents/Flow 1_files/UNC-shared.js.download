/*
 *  Copyright 2017 Adobe Systems Incorporated. All rights reserved.
 *  This file is licensed to you under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License. You may obtain a copy
 *  of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software distributed under
 *  the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 *  OF ANY KIND, either express or implied. See the License for the specific language
 *  governing permissions and limitations under the License.
 */
var UNC=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof self?self:Function("return this")(),a={},o=Object.defineProperty,s={}.hasOwnProperty,u=Math.ceil,c=Math.floor,l=Math.max,f=Math.min,d=!!function(){try{return 2==o({},"a",{get:function(){return 2}}).a}catch(e){}}(),h=y(1);function p(e){return isNaN(e=+e)?0:(e>0?c:u)(e)}function g(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function v(e,t,n){return e[t]=n,e}function y(e){return d?function(t,n,r){return m.setDesc(t,n,g(e,r))}:v}function b(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var m=e.exports=n(59)({g:i,core:a,html:i.document&&document.documentElement,isObject:function(e){return null!==e&&("object"==(void 0===e?"undefined":r(e))||"function"==typeof e)},isFunction:function(e){return"function"==typeof e},it:function(e){return e},that:function(){return this},toInteger:p,toLength:function(e){return e>0?f(p(e),9007199254740991):0},toIndex:function(e,t){return(e=p(e))<0?l(e+t,0):f(e,t)},has:function(e,t){return s.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:d,desc:g,getDesc:Object.getOwnPropertyDescriptor,setDesc:o,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:b,ES5Object:Object,toObject:function(e){return m.ES5Object(b(e))},hide:h,def:y(0),set:i.Symbol?v:h,mix:function(e,t){for(var n in t)h(e,n,t[n]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=a),"undefined"!=typeof __g&&(__g=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"_preprocess",value:function(e){for(var t=0;t<e.length;++t)"string"==typeof e[t]&&e[t].length>10512&&(e[t]=e[t].substring(0,10512)+".....<Truncated>")}},{key:"getStringFromArgs",value:function(e){for(var t="",n=0;n<e.length;n++)"string"==typeof e[n]?t+=e[n]:e[n]&&(t+=JSON.stringify(e[n]));return t}},{key:"error",value:function(){if(!window.logLevel||0!==window.logLevel){var e=Array.prototype.slice.call(arguments);try{window.JSObject&&window.JSObject.logError(this.getStringFromArgs(e))}catch(e){}console.error.apply(console,e)}}},{key:"warn",value:function(){if(window.logLevel&&window.logLevel>=2){var e=Array.prototype.slice.call(arguments);try{window.JSObject&&window.JSObject.logWarn(this.getStringFromArgs(e))}catch(e){}console.warn.apply(console,e)}}},{key:"log",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logInfo(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}},{key:"info",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logInfo(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}},{key:"debug",value:function(){if(window.logLevel&&window.logLevel>=4){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logDebug(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}},{key:"trace",value:function(){if(window.logLevel&&window.logLevel>=5){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logTrace(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}}]),e}();t.default=new i},function(e,t,n){"use strict";var r=n(0),i=r.g,a=r.core,o=r.isFunction;function s(e,t){return function(){return e.apply(t,arguments)}}function u(e,t,n){var c,l,f,d,h=e&u.G,p=h?i:e&u.S?i[t]:(i[t]||{}).prototype,g=h?a:a[t]||(a[t]={});for(c in h&&(n=t),n)f=((l=!(e&u.F)&&p&&c in p)?p:n)[c],d=e&u.B&&l?s(f,i):e&u.P&&o(f)?s(Function.call,f):f,p&&!l&&(h?p[c]=f:delete p[c]&&r.hide(p,c,f)),g[c]!=f&&r.hide(g,c,d)}i.core=a,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConfigurationManager=t.GlobalContext=t.GlobalData=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(44)),a=s(n(17)),o=s(n(25));function s(e){return e&&e.__esModule?e:{default:e}}var u=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._globalData={appID:null,context:null,appBundleID:null,pushDeviceID:null,imsClientID:null,xApiKey:null,machineDeviceToken:null,deviceLocale:"en_US",platform:null,osName:null,osVersion:null,productName:"Creative Cloud",productVersion:null,env:"prod",locale:"en_US",surface:"web",isLongPollFeatureEnabled:!0,isDevicePushEnabled:!1,analytics:"ETS",analyticsEnabled:!1,serverTimeDelta:0,serverTimestampOnLaunch:0,preferencesTimeOut:20,getCurrentServerTimestamp:function(){return(new Date).getTime()-this._globalData.serverTimeDelta}.bind(this)},this._serverConfigurationManager=new i.default,this._serverConfigurationManager.initialize(this._globalData),this._manager=null}return r(e,[{key:"initialize",value:function(e){var t=e,n=!!t.appID;return n&&(this._globalData.context=t,this._globalData.appID=t.appID,this._globalData.imsClientID=t.imsClientID,this._globalData.env=t.env.toLowerCase(),this._globalData.locale=t.locale,t.surface&&(this._globalData.surface=t.surface.toLowerCase()),void 0!==t.analyticsEnabled&&(this._globalData.analyticsEnabled="true"===t.analyticsEnabled.toString().toLowerCase(),this._globalData.analyticsEnabled?"desktop"===this._globalData.surface?o.default.sendAnalyticsForUserPreferenceForAnalytics(!0,"consent"):a.default.sendAnalyticsForUserPreferenceForAnalytics(!0,"consent"):"desktop"===this._globalData.surface?o.default.sendAnalyticsForUserPreferenceForAnalytics(!1,"consent"):a.default.sendAnalyticsForUserPreferenceForAnalytics(!1,"consent")),this._globalData.appBundleID=t.appBundleID,this._globalData.osName=t.osName,this._globalData.osVersion=t.osVersion,this._globalData.productName=t.productName,this._globalData.productVersion=t.productVersion,void 0!==t.surface&&(this._globalData.surface=t.surface.toLowerCase()),void 0!==t.platform&&(this._globalData.platform=t.platform.toLowerCase()),void 0!==t.machineDeviceToken&&(this._globalData.machineDeviceToken=t.machineDeviceToken),void 0!==t.pushDeviceID&&(this._globalData.pushDeviceID=t.pushDeviceID),void 0!==t.isDevicePushEnabled&&(this._globalData.isDevicePushEnabled=t.isDevicePushEnabled),void 0!==t.deviceOSLocale&&(this._globalData.deviceOSLocale=t.deviceOSLocale),void 0!==t["x-api-key"]?this._globalData.xApiKey=t["x-api-key"]:this._globalData.xApiKey=this._globalData.imsClientID,this._serverConfigurationManager.initialize(this._globalData)),n}},{key:"setData",value:function(e){return!!e&&(this._globalData.serverTimestampOnLaunch=e.serverTimestampOnLaunch,this._globalData.serverTimeDelta=e.serverTimeDelta?e.serverTimeDelta:0,this._globalData.env=e.env?e.env:this._globalData.env,this._globalData.locale=e.locale?e.locale:this._globalData.locale,!0)}}]),e}()),c=u._globalData,l=u._serverConfigurationManager;t.GlobalData=c,t.GlobalContext=u,t.ServerConfigurationManager=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),o=u(n(1)),s=u(n(45));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._observers=new Map,this._sourcePropertySeparator="|*#%",this._callback=function(e){o.default.error("NotificationDispatcher: No callback registered, messageObject: ",e)}}return i(e,[{key:"_preprocessObserversList",value:function(e){if(!e||"object"!=(void 0===e?"undefined":r(e))||!e.data||"object"!=r(e.data)||!e.data.namespace||"string"!=typeof e.data.namespace)return!1;e.data.observersList&&Array.isArray(e.data.observersList)||(e.data.observersList&&(e.data.observersList.type||e.data.observersList.subtype)?e.data.observersList=[{type:e.data.observersList.type?e.data.observersList.type:"*",subtype:e.data.observersList.subtype?e.data.observersList.subtype:"*"}]:e.data.observersList=[{type:"*",subtype:"*"}]);for(var t=0;t<e.data.observersList.length;t++)e.data.observersList[t].type=e.data.observersList[t].type?e.data.observersList[t].type:"*",e.data.observersList[t].subtype=e.data.observersList[t].subtype?e.data.observersList[t].subtype:"*";return!0}},{key:"_addRule",value:function(e,t,n,r,i,a){var o="internal";"true"==n&&(o="external"),void 0==t&&(t="");for(var s=e+this._sourcePropertySeparator+t+this._sourcePropertySeparator+o,u=0;u<i.length;u++){var c=i[u].type,l=i[u].subtype;this._observers.has(s)||this._observers.set(s,new Map),this._observers.get(s).has(r)||this._observers.get(s).set(r,new Set),this._observers.get(s).get(r).add({mode:a,type:c,subType:l})}return!0}},{key:"_getListenersList",value:function(e,t){var n=new Set;return this._observers.forEach(function(r,i){r.forEach(function(r,a){var o=!1;r.forEach(function(n,r){"*"!=n.type&&n.type!=e||"*"!=n.subType&&n.subType!=t||(o="+"==n.mode)}),o&&n.add({id:i,namespace:a})})}),n}},{key:"setClientCallback",value:function(e){return this._callback=e,!0}},{key:"registerObserver",value:function(e){return e&&e.data&&e.data.callbackFn&&"function"==typeof e.data.callbackFn?s.default.registerObserver(e):!!this._preprocessObserversList(e)&&this._addRule(e.sourceID,e.sourceVersion,e.isMsgExternal,e.data.namespace,e.data.observersList,"+")}},{key:"unregisterObserver",value:function(e){return e&&e.data&&e.data.callbackFn&&"function"==typeof e.data.callbackFn?s.default.unregisterObserver(e):!!this._preprocessObserversList(e)&&this._addRule(e.sourceID,e.sourceVersion,e.isMsgExternal,e.data.namespace,e.data.observersList,"-")}},{key:"notifyObservers",value:function(e){for(var t=this,n=new Map,r=function(r){t._getListenersList(e[r].type,e[r]["sub-type"]).forEach(function(t){try{if("UNCWidget"===t.id)if(n.has(t.id)){var i=n.get(t.id);i.notifsToProvide&&i.notifsToProvide.notifications&&i.notifsToProvide.notifications.notification.push(e[r])}else{var a={notifications:{notification:[e[r]]}},s={};s.listenerDetails=t,s.notifsToProvide=a,n.set(t.id,s)}else{var u={notifications:{notification:[e[r]]}},c=t.id.split(this._sourcePropertySeparator),l={targetType:"Applet",targetID:c[0],targetVersion:c[1],isMsgExternal:"internal"==c[2]?"false":"true",message:t.namespace,data:u};this._callback(l)}}catch(e){o.default.error("NotificationDispatcher: notifyObservers - Callback exception: ",e)}}.bind(t))},i=0;i<e.length;++i)r(i);return n.size>0&&n.forEach(function(e){try{var t=e.listenerDetails,n=t.id.split(this._sourcePropertySeparator),r={targetType:"Applet",targetID:n[0],targetVersion:n[1],isMsgExternal:"internal"==n[2]?"false":"true",message:t.namespace,data:e.notifsToProvide};this._callback(r)}catch(e){o.default.error("NotificationDispatcher: notifyObservers - Callback exception: ",e)}}.bind(this)),s.default.notifyObservers(e),!0}},{key:"broadcastServerTimestamp",value:function(e){if(e&&"number"!=typeof e)o.default.warn("NotificationDispatcher: broadcastTimestamp - Input 'timestamp' is not valid!!");else{var t=e?e-(new Date).getTime():0;a.GlobalContext.setData({serverTimestampOnLaunch:e,serverTimeDelta:t});var n={};n.value=t,this.sendMessageToApplet("TimestampDrift",n,"*")}}},{key:"sendUpdateAnalyticsConfigToWidget",value:function(e){this.sendMessageToApplet("UpdateAnalyticsConfig",e,"UNCWidget")}},{key:"sendMessageToClient",value:function(e){if(!e||"object"!=(void 0===e?"undefined":r(e))||!e.message||"string"!=typeof e.message)return!1;try{return this._callback(e)}catch(e){o.default.error("NotificationDispatcher: sendDataToClient - Callback exception: ",e)}return!0}},{key:"sendTrayNotificationData",value:function(e){if(e.length){var t={notifications:{notification:e}};this.sendMessageToParent("ShowOSTray",!0,t)}return!0}},{key:"_sendMessage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a={};return a.message=e,a.data=t,a.targetType=n,a.targetID=r,a.isAsync=i,this.sendMessageToClient(a)}},{key:"sendMessageToApplet",value:function(e,t,n){return this._sendMessage(e,t,"Applet",n)}},{key:"sendMessageToCoreExt",value:function(e,t,n){return this._sendMessage(e,t,"CoreExt",n)}},{key:"sendMessageToParent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this._sendMessage(e,n,"Parent","",t)}}]),e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={OneSecond:1e3,TimeOutErrorCountLimit:4,ClientErrorCountLimit:4,ServerErrorCountLimit:10,InternalNetworkErrorCountLimit:10,COREEXT_TARGET_TYPE:"CoreExt",ANALYTICS_DESKTOP_TARGET_ID:"AnalyticsCoreExt",ConfigurationKey:"notification-configuration",CONTAINER_BL:"C3Container_BL",CCDCONTAINER_JS:"CCDContainer_JS",SwitchedToLongPollEvent:"ACCC_SWITCHED_TO_LONGPOLL",SwitchedToLongPollEventWin:"ACCC_WIN_PUSH_NOTIFICATION",DevicePushSet:"ACCC_DEVICE_PUSH_SET",DevicePushEnabledWin:"ANS_CONNECTION_ESTABLISHED",DevicePushDisabledWin:"DISABLED",DevicePushFeatureDisabled:"FeatureDisabled",PushServiceNotRunning:"PushServiceNotRunning",DeviceTokenNotAvailable:"DeviceTokenUnAvailable",AccessTokenMissing:"AccessTokenMissing",DevicePushFailureReason:"@reason",DevicePushFailureErrorCode:"@errorCode",DevicePushFailureReasonWin:"@Notification_Status_Reason",EnableForSurface:"enabled-for-surfaces",PerSurface:"PER_SURFACE"}},function(e,t,n){"use strict";var r=n(0),i=n(8)("toStringTag"),a={}.toString;function o(e){return a.call(e).slice(8,-1)}o.classof=function(e){var t,n;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(n=(t=Object(e))[i])?n:o(t)},o.set=function(e,t,n){e&&!r.has(e=n?e:e.prototype,i)&&r.hide(e,i,t)},e.exports=o},function(e,t,n){"use strict";var r=n(0);function i(e,t,n){if(!e)throw TypeError(n?t+n:t)}i.def=r.assertDefined,i.fn=function(e){if(!r.isFunction(e))throw TypeError(e+" is not a function!");return e},i.obj=function(e){if(!r.isObject(e))throw TypeError(e+" is not an object!");return e},i.inst=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e},e.exports=i},function(e,t,n){"use strict";var r=n(0).g,i={};e.exports=function(e){return i[e]||(i[e]=r.Symbol&&r.Symbol[e]||n(9).safe("Symbol."+e))}},function(e,t,n){"use strict";var r=0;function i(e){return"Symbol("+e+")_"+(++r+Math.random()).toString(36)}i.safe=n(0).g.Symbol||i,e.exports=i},function(e,t,n){"use strict";var r=n(7).fn;e.exports=function(e,t,n){if(r(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";var r=n(0),i=n(10),a=n(6),o=n(2),s=n(7).obj,u=n(8)("iterator"),c="@@iterator",l={},f={},d="keys"in[]&&!("next"in[].keys());function h(e,t){r.hide(e,u,t),c in[]&&r.hide(e,c,t)}function p(e,t,n,i){var o=e.prototype,s=o[u]||o[c]||i&&o[i]||n;if(r.FW&&h(o,s),s!==n){var f=r.getProto(s.call(new e));a.set(f,t+" Iterator",!0),r.FW&&r.has(o,c)&&h(f,r.that)}return l[t]=s,l[t+" Iterator"]=r.that,s}function g(e){var t=r.g.Symbol,n=e[t&&t.iterator||c]||e[u]||l[a.classof(e)];return s(n.call(e))}function v(e){var t=e.return;void 0!==t&&s(t.call(e))}function y(e,t,n,r){try{return r?t(s(n)[0],n[1]):t(n)}catch(t){throw v(e),t}}h(f,r.that);var b=e.exports={BUGGY:d,Iterators:l,prototype:f,step:function(e,t){return{value:t,done:!!e}},stepCall:y,close:v,is:function(e){var t=Object(e),n=r.g.Symbol;return(n&&n.iterator||c)in t||u in t||r.has(l,a.classof(t))},get:g,set:h,create:function(e,t,n,i){e.prototype=r.create(i||b.prototype,{next:r.desc(1,n)}),a.set(e,t+" Iterator")},define:p,std:function(e,t,n,i,a,s,u){function c(e){return function(){return new n(this,e)}}b.create(n,t,i);var l,f,h=c("key+value"),g=c("value"),v=e.prototype;if("value"==a?g=p(e,t,g,"values"):h=p(e,t,h,"entries"),a&&(l={entries:h,keys:s?g:c("key"),values:g},o(o.P+o.F*d,t,l),u))for(f in l)f in v||r.hide(v,f,l[f])},forOf:function(e,t,n,r){for(var a,o=g(e),s=i(n,r,t?2:1);!(a=o.next()).done;)if(!1===y(o,s,a.value,t))return v(o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(40)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.default.debug("Skynet: NetworkCommunicator: NetworkCommunicator is being constructed for request",t),this.networkCommunicatorImplObj=new i.default(t)}return r(e,[{key:"SendRequest",value:function(e){a.default.debug("Skynet: NetworkCommunicator: SendRequest - Sending request.....: ",e),this.networkCommunicatorImplObj.sendRequest(e)}},{key:"GetResponseHeaders",value:function(){return a.default.debug("Skynet: NetworkCommunicator: GetResponseHeaders - Get Response headers....."),this.networkCommunicatorImplObj.getResponseHeaders()}},{key:"CancelRequest",value:function(){a.default.debug("Skynet: NetworkCommunicator: CancelRequest - Cancels Request"),this.networkCommunicatorImplObj.cancelRequest()}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=u(n(4)),o=u(n(1)),s=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"isNELongPollEnabled",value:function(){return i.ServerConfigurationManager.longPollEnabled&&i.GlobalData.isLongPollFeatureEnabled}},{key:"_getUserAccessToken",value:function(){var e=a.default.sendMessageToParent("GetUserProfile",!1);return e?e.AccessToken:null}},{key:"_sanityCheck",value:function(e,t){return e?!!t||(o.default.warn("Access Token cannot be empty. "),!1):(o.default.warn("Application Identifier cannot be empty. "),!1)}},{key:"_createHTTPCommunicatorRequest",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],{}),l={},f={requestHeaders:{},queryParams:{}},d=i.GlobalData.appID,h=e._getUserAccessToken();if(!e._sanityCheck(d,h))return o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null;switch(l.scheme="https",l.hostname=u?i.ServerConfigurationManager.serverBaseUrl:i.ServerConfigurationManager.serverBaseAdobeIOUrl,l.path=n,l.methodType=t,f.requestHeaders["x-adobe-app-id"]=d,n!==i.ServerConfigurationManager.serverBackFillUri?f.requestHeaders["x-user-token"]="Bearer "+h:f.requestHeaders.Authorization="Bearer "+h,u||(f.requestHeaders["x-api-key"]=i.GlobalData.xApiKey),f.requestHeaders["Cache-Control"]="no-cache, no-store, must-revalidate",f.requestHeaders.Pragma="no-cache",f.requestHeaders.Expires="0",f.requestHeaders.Accept="application/json",t){case"GET":if(f.queryParams.page_size=i.ServerConfigurationManager.pageSize.toString(),f.queryParams.config_version=i.ServerConfigurationManager.configVersion,f.queryParams.locale=i.GlobalData.locale,f.queryParams.current_mc_time=(new Date).getTime().toString(),a&&(f.queryParams.to=a.toString()),s&&(f.queryParams.from=s.toString()),u){var p=i.ServerConfigurationManager.longPollTimeout;f.timeoutInSec=p+20,f.requestHeaders["x-long-poll-time-out"]=p}break;case"POST":case"PUT":f.requestHeaders["Content-Type"]="application/json",f.content=r}return c.request=l,c.requestData=f,c}},{key:"createNotificationGetRequest",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e._createHTTPCommunicatorRequest("GET",t,"",n,r,i,a)}},{key:"createNotificationPostRequest",value:function(t){return e._createHTTPCommunicatorRequest("POST",i.ServerConfigurationManager.serverShortPollUri,t)}},{key:"createNotificationPutRequest",value:function(t){return e._createHTTPCommunicatorRequest("PUT",i.ServerConfigurationManager.serverShortPollUri,t)}},{key:"_createNotificationCustomizedRequest",value:function(t,n,r,a,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c={},l={},f={requestHeaders:{},queryParams:{}},d=i.GlobalData.appID,h=e._getUserAccessToken();return e._sanityCheck(d,h)?(l.scheme="https",l.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,l.path=s,l.methodType=n,f.requestHeaders["x-adobe-app-id"]=d,f.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,f.requestHeaders[a]="Bearer "+h,f.requestHeaders["Content-Type"]="application/json",f.requestHeaders.Accept="application/json",f.queryParams&&(f.queryParams=r),u&&(f.responseType=u),f.content=JSON.stringify(t),c.request=l,c.requestData=f,c):(o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null)}},{key:"createNotificationBadgeClearRequest",value:function(t){return navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")>0?e._createNotificationCustomizedRequest(t,"PUT",null,"x-user-token",i.ServerConfigurationManager.serverNotificationUnreadCountURI,"text"):e._createNotificationCustomizedRequest(t,"PUT",null,"x-user-token",i.ServerConfigurationManager.serverNotificationUnreadCountURI)}},{key:"createNotificationCriteriaBasedSearchRequest",value:function(t){return e._createNotificationCustomizedRequest(t,"POST",null,"Authorization",i.ServerConfigurationManager.serverNotificationSearchURI)}},{key:"createDeviceRegistrationRequest",value:function(){var t={},n={},r={requestHeaders:{}};if(!i.GlobalData.machineDeviceToken&&"macos"==i.GlobalData.platform)return o.default.warn("Machine Device token is currently not available. Ignoring device registration request"),null;var a=i.GlobalData.appID,s=e._getUserAccessToken();if(!e._sanityCheck(a,s))return o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null;n.scheme="https",n.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,n.path=i.ServerConfigurationManager.serverDeviceRegisterUnRegisterURI,n.path+=i.GlobalData.platform,n.methodType="POST",r.requestHeaders["x-adobe-app-id"]=a,r.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,r.requestHeaders.Authorization="Bearer "+s,r.requestHeaders["Content-Type"]="application/json",r.requestHeaders.Accept="application/json",i.GlobalData.pushDeviceID&&(r.requestHeaders["x-adobe-device-id"]=i.GlobalData.pushDeviceID);var u={};return u["device-os-version"]=i.GlobalData.osVersion,u.locale=i.GlobalData.deviceOSLocale,"windows"==i.GlobalData.platform?(u["windows-package-identity-name"]="AdobeNotificationClient",u["windows-channel-uri"]=i.GlobalData.context.ChannelURI):(u["macos-bundle-id"]=i.GlobalData.appBundleID,u["macos-device-token"]=i.GlobalData.machineDeviceToken),r.content=JSON.stringify(u),t.request=n,t.requestData=r,t}},{key:"createDeviceUnRegistrationRequest",value:function(){var t={},n={},r={requestHeaders:{}};if(!i.GlobalData.pushDeviceID)return o.default.warn("Push Device token is missing. Ignoring device un-registration request"),null;var a=i.GlobalData.appID,s=e._getUserAccessToken();return e._sanityCheck(a,s)?(n.scheme="https",n.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,n.path=i.ServerConfigurationManager.serverDeviceRegisterUnRegisterURI,n.path+=i.GlobalData.platform,n.methodType="DELETE",r.requestHeaders["x-adobe-app-id"]=i.GlobalData.appID,r.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,r.requestHeaders.Authorization="Bearer "+s,r.requestHeaders["x-adobe-device-id"]=i.GlobalData.pushDeviceID,t.request=n,t.requestData=r,t):(o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null)}},{key:"createPreferencesGetRequest",value:function(t){o.default.info("NotificationHTTPRequestUtils : createPreferencesGetRequest content received ",t);var n={},r={},a={requestHeaders:{},queryParams:{}},s=i.GlobalData.appID,u=e._getUserAccessToken();if(!e._sanityCheck(s,u))return o.default.warn("NotificationHTTPRequestUtils : createPreferencesGetRequest input request is not valid. Either AccessToken or AppID is not valid"),null;r.scheme="https",r.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,r.path=i.ServerConfigurationManager.serverUserPreferencesURI,r.methodType="GET",a.requestHeaders["x-adobe-app-id"]=i.GlobalData.appID,a.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,a.requestHeaders.Authorization="Bearer "+u,a.requestHeaders["Content-Type"]="application/json",a.requestHeaders["Cache-Control"]="no-cache, no-store, must-revalidate",a.requestHeaders.Pragma="no-cache",a.requestHeaders.Expires="0",a.requestHeaders.Accept="application/json",a.queryParams.page_size=i.ServerConfigurationManager.pageSize.toString(),a.queryParams.config_version=i.ServerConfigurationManager.configVersion,a.queryParams.current_mc_time=(new Date).getTime().toString(),a.timeoutInSec=i.GlobalData.preferencesTimeOut;var c=t.categories.category;return c&&(a.queryParams.category=c.toString(),a.queryParams.locale=i.GlobalData.locale),n.request=r,n.requestData=a,n}},{key:"createPreferencesSetRequest",value:function(t){o.default.info("NotificationHTTPRequestUtils : createPreferencesSetRequest content received ",t);var n={},r={},a={requestHeaders:{}},u=i.GlobalData.appID,c=e._getUserAccessToken();if(!e._sanityCheck(u,c))return o.default.warn("NotificationHTTPRequestUtils : createPreferencesSetRequest input request is not valid. Either AccessToken or AppID is not valid"),null;r.scheme="https",r.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,r.path=i.ServerConfigurationManager.serverUserPreferencesURI,r.methodType="PUT",a.requestHeaders["x-adobe-app-id"]=i.GlobalData.appID,a.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,a.requestHeaders.Authorization="Bearer "+c,a.requestHeaders["Content-Type"]="application/json",a.requestHeaders["Cache-Control"]="no-cache, no-store, must-revalidate",a.requestHeaders.Pragma="no-cache",a.timeoutInSec=i.GlobalData.preferencesTimeOut;var l=t.preferences,f={categories:[]};for(var d in l){var h={};h.category=d,h[s.default.EnableForSurface]=s.default.PerSurface,h.surfaces=[{surface:t.surface,enabled:l[d]}],f.categories.push(h)}return a.content=JSON.stringify(f),n.request=r,n.requestData=a,n}}]),e}();t.default=c},function(e,t,n){"use strict";var r=n(0),i=n(8)("unscopables");!r.FW||i in[]||r.hide(Array.prototype,i,{}),e.exports=function(e){r.FW&&([][i][e]=!0)}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r.DESC&&r.FW&&r.setDesc(e,n(8)("species"),{configurable:!0,get:r.that})}},function(e,t,n){"use strict";var r=n(0),i=n(2),a=n(11),o=n(7).inst;e.exports=function(e,t,s,u,c){var l=r.g[e],f=l,d=u?"set":"add",h=f&&f.prototype,p={};function g(e,t){var n=h[e];r.FW&&(h[e]=function(e,r){var i=n.call(this,0===e?0:e,r);return t?this:i})}if(r.isFunction(f)&&(c||!a.BUGGY&&h.forEach&&h.entries)){var v,y=new f,b=y[d](c?{}:-0,1);n(20)(function(e){new f(e)})||((f=function(t){o(this,f,e);var n=new l;return void 0!=t&&a.forOf(t,u,n[d],n),n}).prototype=h,r.FW&&(h.constructor=f)),c||y.forEach(function(e,t){v=1/t==-1/0}),v&&(g("delete"),g("has"),u&&g("get")),(v||b!==y)&&g(d,!0)}else f=s.getConstructor(e,u,d),r.mix(f.prototype,t);return n(6).set(f,e),n(15)(f),p[e]=f,i(i.G+i.W+i.F*(f!=l),p),c||a.std(f,e,s.getIterConstructor(),s.next,u?"key+value":"value",!u,!0),f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n(46)),o=(c(n(5)),n(3)),s=c(n(24)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getDefaultObjectForUNCForAnalytics",value:function(){var e={xApiKey:"unc-web-service",apiKey:"unc-web-service",source:"UNC",project:"unc-web-service"};return"prod"!==o.GlobalData.env.toLowerCase()?(e.environment="stage",e.rsid="adbem-cchome-dev"):(e.environment="prod",e.rsid="adbem-cchome-prod"),e}},{key:"sendAnalyticsForReceiptOfNotification",value:function(e){if(o.GlobalData.analyticsEnabled){var t=new a.default(this.getDefaultObjectForUNCForAnalytics());t.initializeDefaultData(),t.setDataValue("event","type","receipt"),t.setDataValue("event","subcategory","Message"),this.setConstantFieldsWithValues(t),e["notification-id"]&&""!==e["notification-id"]&&t.setDataValue("content","id",e["notification-id"]),e.type&&""!==e.type&&e["sub-type"]&&""!==e["sub-type"]&&t.setDataValue("content","type",e.type+":"+e["sub-type"]),"NEW"===e.state?t.setDataValue("content","status","unread"):t.setDataValue("content","status","read");try{var n="object"===r(e.payload)?e.payload:JSON.parse(e.payload);e.metadata&&e.metadata["tracking-system-payload"]&&""!==e.metadata["tracking-system-payload"]&&t.setDataValue("custom","ans.client_payload",e.metadata["tracking-system-payload"]),n["tracking-system-payload"]&&""!==n["tracking-system-payload"]&&t.setDataValue("custom","ans.client_payload",n["tracking-system-payload"])}catch(e){u.default.warn("EngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : Error in paylaod parsing")}t.addToCollection(),t.sendToIngest()}}},{key:"sendAnalyticsForUserPreferenceForAnalytics",value:function(e,t){var n=new a.default(this.getDefaultObjectForUNCForAnalytics());if(n.initializeDefaultData(),n.setDataValue(s.default.Event_Section,"type","click"),n.setDataValue(s.default.Event_Section,"subcategory","Privacy Notice"),e?n.setDataValue(s.default.Event_Section,"subtype","opt-in"):n.setDataValue(s.default.Event_Section,"subtype","opt-out"),t&&n.setDataValue(s.default.Event_Section,"value",t),o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.evidonDetails&&"object"===r(o.GlobalData.context.analyticsConfig.evidonDetails))for(var i=Object.keys(o.GlobalData.context.analyticsConfig.evidonDetails),u=0;u<i.length;u++){var c=i[u];-1!==s.default.Evidon_Supported_Keys.indexOf(c)&&("name"===c?n.setDataValue(s.default.Environment_Section,"svc.name",o.GlobalData.context.analyticsConfig.evidonDetails[c]):"version"===c&&n.setDataValue(s.default.Environment_Section,"svc.version",o.GlobalData.context.analyticsConfig.evidonDetails[c]))}this.setConstantFieldsWithValues(n),n.addToCollection(),n.sendToIngest()}},{key:"setConstantFieldsWithValues",value:function(e){if(e.setDataValue("event","workflow","UNC"),e.setDataValue("event","category","WEB"),e.setDataValue("source","platform","WEB"),e.setDataValue("source","name","UNC"),e.setDataValue("source","version",s.default.VERSION_PARAM),o.GlobalData.imsClientID&&""!==o.GlobalData.imsClientID&&e.setDataValue("source","client_id",o.GlobalData.imsClientID),o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.componentDetails&&"object"===r(o.GlobalData.context.analyticsConfig.componentDetails))for(var t=Object.keys(o.GlobalData.context.analyticsConfig.componentDetails),n=0;n<t.length;n++){var i=t[n];-1!==s.default.Component_Supported_Keys.indexOf(i)&&("name"===i?e.setDataValue(s.default.Environment_Section,"com.name",o.GlobalData.context.analyticsConfig.componentDetails[i]):"version"===i&&e.setDataValue(s.default.Environment_Section,"com.version",o.GlobalData.context.analyticsConfig.componentDetails[i]))}if(o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.eventDetails&&"object"===r(o.GlobalData.context.analyticsConfig.eventDetails))for(var a=Object.keys(o.GlobalData.context.analyticsConfig.eventDetails),u=0;u<a.length;u++){var c=a[u];-1!==s.default.Event_Supported_Keys.indexOf(c)&&e.setDataValue(s.default.Event_Section,c,o.GlobalData.context.analyticsConfig.eventDetails[c])}if(o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.consumerDetails&&"object"===r(o.GlobalData.context.analyticsConfig.consumerDetails)){for(var l=Object.keys(o.GlobalData.context.analyticsConfig.consumerDetails),f=0;f<l.length;f++){var d=l[f];-1!==s.default.Consumer_Supported_Keys.indexOf(d)&&e.setDataValue(s.default.Consumer_Section,d,o.GlobalData.context.analyticsConfig.consumerDetails[d])}var h=e.getDevice();h&&""!==h&&e.setDataValue(s.default.Consumer_Section,"device",h);var p=e.getOSVersion();p&&""!==p&&e.setDataValue(s.default.Consumer_Section,"os_version",p)}var g=e.getDevice();g&&""!==g&&e.setDataValue("consumer","device",g);var v=e.getOSVersion();v&&""!==v&&e.setDataValue("consumer","os_version",v)}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),o=f(n(5)),s=f(n(4)),u=f(n(1)),c=f(n(25)),l=f(n(17));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"_hasOSTray",value:function(e){if(!e)return!1;try{var t=JSON.parse(e);if(t&&"object"===(void 0===t?"undefined":r(t))&&void 0!==t.ostray)return!0}catch(e){return!1}return!1}},{key:"processNotifications",value:function(e){for(var t=new Array,n=new Array,r={},i=!0,f=e.notificationResponseList.length-1;f>=0;f--){var d=e.notificationResponseList[f];if(0==f&&(d.hasOwnProperty("unread-count")&&(r.value=parseInt(d["unread-count"]),s.default.sendMessageToApplet("UnReadNotificationsCount",r,"UNCWidget")),d["server-timestamp"])){if(!a.GlobalData.serverTimestampOnLaunch){a.GlobalData.serverTimestampOnLaunch=d["server-timestamp"];s.default.sendMessageToApplet("InitLongPoll",{},"UNCEngine")}s.default.broadcastServerTimestamp(d["server-timestamp"])}if(i&&d.hasOwnProperty(o.default.ConfigurationKey)&&(i=!1,a.ServerConfigurationManager.setConfigParams(d[o.default.ConfigurationKey])),!e.notify)break;if(d.notifications&&d.notifications.notification)for(var h=d.notifications.notification,p=h.length-1;p>=0;p--){var g=h[p];try{a.GlobalData.surface&&"DESKTOP"===a.GlobalData.surface.toUpperCase()?c.default.sendAnalyticsForReceiptOfNotification(g):l.default.sendAnalyticsForReceiptOfNotification(g)}catch(e){u.default.warn("NotificationProcessor: processNotifications - Error while sending receipt analytics: ",e)}t.push(g),e.notify&&this._hasOSTray(g.payload)&&n.push(g)}else u.default.warn("NotificationProcessor: processNotifications - Recieved invalid notification response. Ignore processing")}if(e.notify)s.default.notifyObservers(t),n.reverse(),s.default.sendTrayNotificationData(n);else if(e.targetID){var v={};v.notifications=e.notificationResponseList[0].notifications;for(var y=v.notifications,b=0;b<y.length;b++){var m=y[b];if("NEW"===m.state)try{a.GlobalData.surface&&"DESKTOP"===a.GlobalData.surface.toUpperCase()?c.default.sendAnalyticsForReceiptOfNotification(m):l.default.sendAnalyticsForReceiptOfNotification(m)}catch(e){u.default.warn("NotificationProcessor: processNotifications - Error while sending historical receipt analytics: ",e)}}s.default.sendMessageToApplet(e.namespace,v,e.targetID)}else if(e.callbackFn&&"function"==typeof e.callbackFn){var _={data:{notifications:e.notificationResponseList[0].notifications}};e.requestContext&&(_.requestContext=e.requestContext);try{e.callbackFn(_)}catch(e){u.default.error("HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}}}}]),e}();t.default=new d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(function(e){e&&e.__esModule}(n(1)),n(3));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nextFutureRequestTimestamp=i.GlobalData.serverTimestampOnLaunch}return r(e,[{key:"nextFutureRequestTimestamp",get:function(){return this._nextFutureRequestTimestamp},set:function(e){this._nextFutureRequestTimestamp=e}}]),e}();t.default=a},function(e,t,n){"use strict";var r=n(8)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e){if(!i)return!1;var t=!1;try{var n=[7],a=n[r]();a.next=function(){t=!0},n[r]=function(){return a},e(n)}catch(e){}return t}},function(e,t,n){"use strict";var r=n(0),i=n(10);e.exports=function(e){var t=1==e,n=2==e,a=3==e,o=4==e,s=6==e,u=5==e||s;return function(c){for(var l,f,d=Object(r.assertDefined(this)),h=r.ES5Object(d),p=i(c,arguments[1],3),g=r.toLength(h.length),v=0,y=t?Array(g):n?[]:void 0;g>v;v++)if((u||v in h)&&(f=p(l=h[v],v,d),e))if(t)y[v]=f;else if(f)switch(e){case 3:return!0;case 5:return l;case 6:return v;case 2:y.push(l)}else if(o)return!1;return s?-1:a||o?o:y}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(35)),o=l(n(39)),s=l(n(27)),u=l(n(1)),c=l(n(24));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function(){function e(){f(this,e),this._clientCallback=function(e,t){u.default.debug("UNCContainer: client callback not provided or not a valid fn, namespace: ",e,", data: ",t)},this._clientNamespaces={},this._userProfile=null}return i(e,[{key:"_sendMessage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this._ccxCore.handleMessage({targetType:n,message:e,data:t,targetID:r})}},{key:"_getUserProfile",value:function(){return this._userProfile}},{key:"_setUserProfile",value:function(e){return e?s.default.sanitizeUserProfile(e)?(this._userProfile=new s.default(e),!0):(u.default.warn("UNCContainer: _setUserProfile - Input user profile sanity failed"),!1):(u.default.warn("UNCContainer: _setUserProfile - Cannot set empty user profile"),!1)}},{key:"_invalidateUserProfile",value:function(){delete this._userProfile,this._userProfile=null}},{key:"_loadUI",value:function(e,t){var n={appID:e.appID,imsClientID:e.imsClientID,locale:e.locale,env:e.env,surface:e.uiConfig.surface,cssOverride:e.uiConfig.cssOverride,cssPath:e.uiConfig.cssPath,theme:e.uiConfig.theme,tabIndex:e.uiConfig.tabIndex,el:e.uiConfig.el,analyticsConfig:e.analyticsConfig,parentSpectrumProvider:e.uiConfig.parentSpectrumProvider};e.uiConfig&&e.uiConfig.hostCallBackFn&&(n.hostCallBackFn=e.uiConfig.hostCallBackFn),e.uiConfig&&e.uiConfig.onUNCWidgetReady&&(n.onUNCWidgetReady=e.uiConfig.onUNCWidgetReady),e.analyticsEnabled?n.analyticsEnabled=e.analyticsEnabled:n.analyticsEnabled=!1,e.notificationUpdateCallbackFn&&(n.notificationUpdateCallbackFn=e.notificationUpdateCallbackFn);var r={id:"UNCWidget",version:"1.0"};"stage"===e.env.toLowerCase()||"stg"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?r.path=c.default.STAGE_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget-shared.js":r.path=c.default.STAGE_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.js",r.cssPath=c.default.STAGE_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.css"):"dev"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?r.path=c.default.DEV_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget-shared.js":r.path=c.default.DEV_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.js",r.cssPath=c.default.DEV_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.css"):"qe"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?r.path=c.default.QE_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget-shared.js":r.path=c.default.QE_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.js",r.cssPath=c.default.QE_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.css"):"local"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?r.path="http://localhost:8080/UNCWidget-shared.js":r.path="http://localhost:8080/UNCWidget.js",r.cssPath="http://localhost:8080/UNCWidget.css"):(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?r.path=c.default.PROD_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget-shared.js":r.path=c.default.PROD_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.js",r.cssPath=c.default.PROD_BASE_PATH+"/"+c.default.PATH_PARAM+"/"+c.default.VERSION_PARAM+"/UNCWidget.css");var i=Object.assign({},r,{initData:{},statusCallback:function(t){t.status?(u.default.debug("UNCContainer: _loadUI - success returned in loading UNCWIdget"),this._sendMessage("InitContext",n,"Applet","UNCWidget"),u.default.debug("UNCContainer: _loadUI - Initializing UNCWidget with context: ",n),this._loadBL(e)):u.default.debug("UNCContainer: _loadUI - error returned in loading UNCWIdget")}.bind(this),panels:void 0});this._sendMessage("LoadModule",i,"JSCore")}},{key:"_loadBL",value:function(e){var t={id:"UNCEngine",moduleObject:new o.default,initData:""};this._sendMessage("RegisterModule",t,"JSCore"),this._sendMessage("InitContext",e,"Applet","UNCEngine")}},{key:"initialize",value:function(e){if(e&&e.initJSON&&"object"==r(e.initJSON)){this._ccxCore=e.hostObject;var t=e.initJSON.applicationContext;t.namespaces&&"object"==r(t.namespaces)&&(this._clientNamespaces=t.namespaces),e.initJSON.callback&&"function"==typeof e.initJSON.callback&&(this._clientCallback=e.initJSON.callback),t.userProfile&&"object"==r(t.userProfile)&&(this._setUserProfile(t.userProfile),delete t.userProfile),t.uiEnabled?t.uiConfig&&"object"==r(t.uiConfig)&&this._loadUI(t):this._loadBL(t)}}},{key:"handleMessage",value:function(e){var t=e.message;switch(t){case"ShowOSTray":u.default.debug("UNCContainer: handleMessage: ShowOSTray - Calling client callback with namespace '",this._clientNamespaces[t],"'");try{this._clientCallback(this._clientNamespaces[t],e.data)}catch(e){u.default.debug("UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}return;case"UpdateBadge":u.default.debug("UNCContainer: handleMessage: UpdateBadge - Calling client callback with namespace '",this._clientNamespaces[t],"'");try{this._clientCallback(this._clientNamespaces[t],e.data)}catch(e){u.default.debug("UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}return;case"GetUserProfile":return u.default.debug("UNCContainer: handleMessage: GetUserProfile - Sending userProfile Data to ",e.sourceID),this._getUserProfile();case"RefreshUserProfile":if(this._userProfile){u.default.debug("UNCContainer: handleMessage: RefreshUserProfile - Recieved request from ",e.sourceID,"Invalidating existing user profile and fetching updated profile"),this._invalidateUserProfile();try{this._clientCallback(t,e.data)}catch(e){u.default.debug("UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}}return;default:u.default.debug("UNCContainer: handleMessage: default - Calling client callback with namespace '",t,"'");try{this._clientCallback(t,e.data)}catch(e){u.default.debug("UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}return}}},{key:"finalize",value:function(e){}},{key:"handleMessageFromInterface",value:function(e,t){switch(e){case"RegisterObservers":return void this._sendMessage("RegisterObservers",t,"Applet","UNCEngine");case"UnregisterObservers":return void this._sendMessage("UnregisterObservers",t,"Applet","UNCEngine");case"GetNotifications":return void this._sendMessage("GetNotifications",t,"Applet","UNCEngine");case"PostNotifications":return void this._sendMessage("PostNotifications",t,"Applet","UNCEngine");case"UpdateNotifications":return void this._sendMessage("UpdateNotifications",t,"Applet","UNCEngine");case"UpdateNotificationContent":return void this._sendMessage("UpdateNotificationContent",t,"Applet","UNCWidget");case"UpdateUserProfile":if(!t)return;var n=t;"string"==typeof n&&(n=JSON.parse(t)),this.userProfile&&this._invalidateUserProfile(),this._setUserProfile(n);return void this._sendMessage("UpdateUserProfile",{},"Applet","UNCEngine");case"ClearBadge":return void this._sendMessage("ClearBadge",t,"Applet","UNCEngine");case"UpdateAnalyticsConfig":return void this._sendMessage("UpdateAnalyticsConfig",t,"Applet","UNCEngine");case"ShowNotificationWidget":return void this._sendMessage("ShowNotificationWidget",t,"Applet","UNCWidget");case"HideNotificationWidget":return void this._sendMessage("HideNotificationWidget",t,"Applet","UNCWidget");default:return}}}]),e}(),h=function(){function e(t){if(f(this,e),t&&t.applicationContext&&"object"==r(t.applicationContext)){window._babelPolyfill||n(55),u.default.debug("UNC: Initializing UNCEngine context: ",t),this._ccxCore=new a.default,this._uncContainer=new d,this._ccxCore.initialize({hostObject:function(e){u.default.warn("UNC: Message received for core loader (host process), message object: ",e)}});var i={targetType:"JSCore",message:"RegisterModule",data:{id:"UNCContainer",moduleObject:this._uncContainer,initData:t}};this._ccxCore.handleMessage(i)}}return i(e,[{key:"RegisterObservers",value:function(e){this._uncContainer.handleMessageFromInterface("RegisterObservers",e)}},{key:"UnregisterObservers",value:function(e){this._uncContainer.handleMessageFromInterface("UnregisterObservers",e)}},{key:"GetNotifications",value:function(e){this._uncContainer.handleMessageFromInterface("GetNotifications",e)}},{key:"PostNotifications",value:function(e){this._uncContainer.handleMessageFromInterface("PostNotifications",e)}},{key:"UpdateNotifications",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateNotifications",e)}},{key:"UpdateNotificationContent",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateNotificationContent",e)}},{key:"UpdateUserProfile",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateUserProfile",e)}},{key:"ClearBadge",value:function(e){this._uncContainer.handleMessageFromInterface("ClearBadge",e)}},{key:"UpdateDeviceID",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateDeviceID",e)}},{key:"UpdateAnalyticsConfig",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateAnalyticsConfig",e)}},{key:"ShowNotificationWidget",value:function(e){this._uncContainer.handleMessageFromInterface("ShowNotificationWidget",e)}},{key:"HideNotificationWidget",value:function(e){this._uncContainer.handleMessageFromInterface("HideNotificationWidget",e)}}]),e}();t.default=h,"development"===e.env.NODE_ENV&&n(100)}).call(t,n(34))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={UnSupportedBrowser:-1,InsufficientMemory:-2,UnSupportedUrlScheme:-3,UnSupportedMethod:-4,UrlSchemeMissing:-5,UrlHostnameMissing:-6,MethodTypeMissing:-7,TimeoutError:-8,NetworkFailure:-9,InvalidRequest:-10,Success:1,IndexNotFound:-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={PROD_BASE_PATH:"https://prod.adobeccstatic.com",DEV_BASE_PATH:"https://dev.adobeccstatic.com",STAGE_BASE_PATH:"https://stage.adobeccstatic.com",QE_BASE_PATH:"https://qe.adobeccstatic.com",PATH_PARAM:"unc",VERSION_PARAM:"8.6",LATEST_VERSION_PARAM:"latest",Consumer_Supported_Keys:["client_id","name","version","platform","app_store_id"],Component_Supported_Keys:["name","version"],Event_Supported_Keys:["visitor_guid"],Evidon_Supported_Keys:["name","version"],Event_Section:"event",Source_Section:"source",Content_Section:"content",UI_Section:"ui",Environment_Section:"env",Consumer_Section:"consumer",User_Section:"user",Transaction_Section:"trn",Experiment_Section:"exp",Component_Section:"env.com"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),o=c(n(5)),s=c(n(4)),u=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getDefaultObjectForConfigurationsForUNCTrayForAnalytics",value:function(){var e={xApiKey:"unc-thor-service",apiKey:"unc-thor-service",source:"UNC",project:"unc-thor-service"};return e}},{key:"sendAnalyticsForReceiptOfNotification",value:function(e){var t={};t.projectConfigDetails=this.getDefaultObjectForConfigurationsForUNCTrayForAnalytics();var n={"event.type":"receipt","event.subcategory":"Message"};this.setConstantFieldsWithValues(n),e["notification-id"]&&""!==e["notification-id"]&&(n["content.id"]=e["notification-id"]),e.type&&""!==e.type&&e["sub-type"]&&""!==e["sub-type"]&&(n["content.type"]=e.type+":"+e["sub-type"]),"NEW"===e.state?n["content.status"]="unread":n["content.status"]="read";try{var i="object"===r(e.payload)?e.payload:JSON.parse(e.payload);e.metadata&&e.metadata["tracking-system-payload"]&&""!==e.metadata["tracking-system-payload"]&&(n["ans.client_payload"]=e.metadata["tracking-system-payload"]),i["tracking-system-payload"]&&""!==i["tracking-system-payload"]&&(n["ans.client_payload"]=i["tracking-system-payload"])}catch(e){u.default.warn("DesktopUNCEngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : Error in paylaod parsing")}t.data=n,s.default.sendMessageToApplet("SendAnalytics",t,o.default.ANALYTICS_DESKTOP_TARGET_ID)}},{key:"sendAnalyticsForUserPreferenceForAnalytics",value:function(e,t){var n={};n.projectConfigDetails=this.getDefaultObjectForConfigurationsForUNCTrayForAnalytics();var i={"event.type":"click","event.subcategory":"Privacy Notice"};if(i["event.subtype"]=e?"opt-in":"opt-out",t&&(i["event.value"]=t),a.GlobalData.context.analyticsConfig&&a.GlobalData.context.analyticsConfig.evidonDetails&&"object"===r(a.GlobalData.context.analyticsConfig.evidonDetails))for(var u=Object.keys(a.GlobalData.context.analyticsConfig.evidonDetails),c=0;c<u.length;c++){var l=u[c];-1!==CommonConstants.Evidon_Supported_Keys.indexOf(l)&&("name"===l?i["env.svc.name"]=a.GlobalData.context.analyticsConfig.evidonDetails[l]:"version"===l&&(i["env.svc.version"]=a.GlobalData.context.analyticsConfig.evidonDetails[l]))}this.setConstantFieldsWithValues(i),n.data=i,s.default.sendMessageToApplet("SendAnalytics",n,o.default.ANALYTICS_DESKTOP_TARGET_ID)}},{key:"setConstantFieldsWithValues",value:function(e){e["event.workflow"]="UNC",e["event.category"]="DESKTOP",e["source.platform"]="DESKTOP",e["source.name"]="UNC",e["source.version"]="1.0",a.GlobalData.imsClientID&&""!==a.GlobalData.imsClientID&&(e["source.client_id"]=a.GlobalData.imsClientID),a.GlobalData.imsClientID&&""!==a.GlobalData.imsClientID&&(e["consumer.client_id"]=a.GlobalData.imsClientID),a.GlobalData.productName&&""!==a.GlobalData.productName&&(e["consumer.name"]=a.GlobalData.productName),a.GlobalData.productVersion&&""!==a.GlobalData.productVersion&&(e["consumer.version"]=a.GlobalData.productVersion),e["consumer.platform"]="DESKTOP"}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(o(n(3)),o(n(5))),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeoutFailureCount=0,this.clientFailureCount=0,this.serverFailureCount=0,this.internalNetworkFailureCount=0,this.failedState=!1}return r(e,[{key:"resetErrorTypeFailureCount",value:function(){this.timeoutFailureCount=0,this.clientFailureCount=0,this.serverFailureCount=0,this.internalNetworkFailureCount=0,this.failedState=!1}},{key:"_handleShortPollRequestFailure",value:function(e){if(!this.failedState){var t=0,n=0;switch(e){case"Timeout":n=++this.timeoutFailureCount,t=i.default.TimeOutErrorCountLimit;break;case"ClientFailure":n=++this.clientFailureCount,t=i.default.ClientErrorCountLimit;break;case"ServerFailure":n=++this.serverFailureCount,t=i.default.ServerErrorCountLimit;break;case"NetworkFailure":n=++this.internalNetworkFailureCount,t=i.default.InternalNetworkErrorCountLimit}n==t-1&&(a.default.warn("NotificationRequestManagerErrorCountsHelper: _handleShortPollRequestFailure - ShortPoll failures of type:",e," has reached its failure count limit. Adding delay in successive ShortPolls(if failure persists)"),this.failedState=!0)}}},{key:"_handleFetchError",value:function(e){switch(e){case"Internal_Server_Error":case"Request_Not_Implemented":case"Bad_Gateway":case"Service_Unavailable":case"Gateway_Timeout":case"Server_Response_Error":this._handleShortPollRequestFailure("ServerFailure");break;case"Network_Failure":this._handleShortPollRequestFailure("NetworkFailure");break;case"Request_Timeout":this._handleShortPollRequestFailure("Timeout");break;default:this._handleShortPollRequestFailure("ClientFailure")}}}]),e}();t.default=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.AccountType=this.UserID=this.Email=this.DisplayName=this.FirstName=this.LastName=this.Name=this.CountryCode="",t.userGuid?this.UserID=t.userGuid:this.UserID=t.userId,t.accessToken?this.AccessToken=t.accessToken:this.AccessToken=t.access_token,t.account_type&&(this.AccountType=t.account_type),t.email&&(this.Email=t.email),t.displayname&&(this.DisplayName=t.displayname),t.first_name&&(this.FirstName=t.first_name),t.last_name&&(this.LastName=t.last_name),t.name&&(this.Name=t.name),t.countryCode&&(this.CountryCode=t.countryCode)}return r(e,null,[{key:"sanitizeUserProfile",value:function(e){return!(!e.access_token&&!e.accessToken||!e.userId&&!e.userGuid)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(3),s(n(5))),a=s(n(4)),o=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"sendAnalytics",value:function(e,t,n){if(e){var r={eventParamData:{eventParam:[]}};r.eventCode=e,r.eventSubCode=n,r.eventParamData.eventParam=t,a.default.sendMessageToApplet("SendAnalyticsFromJS",r,i.default.CONTAINER_BL)}else o.default.info("NotificationUtils: sendAnalytics - EventCode cannot be empty()")}}]),e}();t.default=new u},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r=n(0),i=n(7);function a(e,t){i.obj(e),i(null===t||r.isObject(t),t,": can't set as prototype!")}e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t){try{(t=n(10)(Function.call,r.getDesc(Object.prototype,"__proto__").set,2))({},[])}catch(t){e=!0}return function(n,r){return a(n,r),e?n.__proto__=r:t(n,r),n}}():void 0),check:a}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){return function(t){var n,i,a=String(r.assertDefined(this)),o=r.toInteger(t),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(0),i=n(10),a=n(9).safe,o=n(7),s=n(11),u=r.has,c=r.set,l=r.isObject,f=r.hide,d=s.step,h=Object.isFrozen||r.core.Object.isFrozen,p=a("id"),g=a("O1"),v=a("last"),y=a("first"),b=a("iter"),m=r.DESC?a("size"):"size",_=0;function C(e,t){if(!l(e))return("string"==typeof e?"S":"P")+e;if(h(e))return"F";if(!u(e,p)){if(!t)return"E";f(e,p,++_)}return"O"+e[p]}function k(e,t){var n,r=C(t);if("F"!=r)return e[g][r];for(n=e[y];n;n=n.n)if(n.k==t)return n}e.exports={getConstructor:function(e,t,n){function a(i){var u=o.inst(this,a,e);c(u,g,r.create(null)),c(u,m,0),c(u,v,void 0),c(u,y,void 0),void 0!=i&&s.forOf(i,t,u[n],u)}return r.mix(a.prototype,{clear:function(){for(var e=this[g],t=this[y];t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete e[t.i];this[y]=this[v]=void 0,this[m]=0},delete:function(e){var t=k(this,e);if(t){var n=t.n,r=t.p;delete this[g][t.i],t.r=!0,r&&(r.n=n),n&&(n.p=r),this[y]==t&&(this[y]=n),this[v]==t&&(this[v]=r),this[m]--}return!!t},forEach:function(e){for(var t,n=i(e,arguments[1],3);t=t?t.n:this[y];)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!k(this,e)}}),r.DESC&&r.setDesc(a.prototype,"size",{get:function(){return o.def(this[m])}}),a},def:function(e,t,n){var r,i,a=k(e,t);return a?a.v=n:(e[v]=a={i:i=C(t,!0),k:t,v:n,p:r=e[v],n:void 0,r:!1},e[y]||(e[y]=a),r&&(r.n=a),e[m]++,"F"!=i&&(e[g][i]=a)),e},getEntry:k,getIterConstructor:function(){return function(e,t){c(this,b,{o:e,k:t})}},next:function(){for(var e=this[b],t=e.k,n=e.l;n&&n.r;)n=n.p;return e.o&&(e.l=n=n?n.n:e.o[y])?d(0,"key"==t?n.k:"value"==t?n.v:[n.k,n.v]):(e.o=void 0,d(1))}}},function(e,t,n){"use strict";var r=n(0),i=n(9).safe,a=n(7),o=n(11).forOf,s=r.has,u=r.isObject,c=r.hide,l=Object.isFrozen||r.core.Object.isFrozen,f=0,d=i("id"),h=i("weak"),p=i("leak"),g=n(21),v=g(5),y=g(6);function b(e,t){return v.call(e.array,function(e){return e[0]===t})}function m(e){return e[p]||c(e,p,{array:[],get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var n=b(this,e);n?n[1]=t:this.array.push([e,t])},delete:function(e){var t=y.call(this.array,function(t){return t[0]===e});return~t&&this.array.splice(t,1),!!~t}})[p]}e.exports={getConstructor:function(e,t,n){function i(s){r.set(a.inst(this,i,e),d,f++),void 0!=s&&o(s,t,this[n],this)}return r.mix(i.prototype,{delete:function(e){return!!u(e)&&(l(e)?m(this).delete(e):s(e,h)&&s(e[h],this[d])&&delete e[h][this[d]])},has:function(e){return!!u(e)&&(l(e)?m(this).has(e):s(e,h)&&s(e[h],this[d]))}}),i},def:function(e,t,n){return l(a.obj(t))?m(e).set(t,n):(s(t,h)||c(t,h,{}),t[h][e[d]]=n),e},leakStore:m,WEAK:h,ID:d}},function(e,t,n){"use strict";var r,i,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,l=[],f=!1,d=-1;function h(){f&&c&&(f=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!f){var e=u(h);f=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||f||u(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},a=u(n(36)),o=u(n(37)),s=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._coreMessageManager=new o.default(e),e._hostMessageHandlerFn=function(e){s.default.warn("Core: Host message handler found missing while sending message: ",e)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"initialize",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),this._coreMessageManager.initialize(e)}},{key:"handleMessage",value:function(e){return this._coreMessageManager.handleMessage(e)}},{key:"finalize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finalize",this).call(this,dataJSON)}}]),t}();t.default=c,window.CCXCore=function(){return new c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hostObject=null,this._hostMessageHandlerFn=null}return i(e,[{key:"initialize",value:function(e){e&&"object"==(void 0===e?"undefined":r(e))&&(e.hostObject&&"object"==r(e.hostObject)&&(this._hostObject=e.hostObject),e.hostMessageHandlerFn&&"function"==typeof e.hostMessageHandlerFn&&(this._hostMessageHandlerFn=e.hostMessageHandlerFn))}},{key:"handleMessage",value:function(e){}},{key:"finalize",value:function(e){}},{key:"sendMessage",value:function(e){return this._hostObject&&this._hostObject.handleMessage&&"function"==typeof this._hostObject.handleMessage?this._hostObject.handleMessage(e):this._hostMessageHandlerFn?this._hostMessageHandlerFn(e):void 0}},{key:"sendMessageToJSCore",value:function(e,t){return this.sendMessage({targetType:"JSCore",message:e,data:t||{}})}},{key:"sendMessageToParent",value:function(e,t){return this.sendMessage({targetType:"Parent",message:e,data:t||{}})}},{key:"sendMessageToHost",value:function(e,t){return this.sendMessage({targetType:"Host",message:e,data:t||{}})}},{key:"sendMessageToContainer",value:function(e,t){return this.sendMessage({targetType:"Container",message:e,data:t||{}})}},{key:"sendMessageToApplet",value:function(e,t,n,r,i){return this.sendMessage({targetType:"Applet",targetID:n||"",targetVersion:r||"",targetInstanceID:i||"",message:e,data:t||{}})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(38)),o=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ccxCoreObj=t,this._loadingModules=new Map,this._loadedModules=new Map,this._loadedCoreExtensions=new Map,this._moduleRoleMap=new Map}return i(e,[{key:"initialize",value:function(e){if(e.coreExtensionList){var t=!0,n=!1,r=void 0;try{for(var i,a=e.coreExtensionList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this.loadCoreExtension(o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}}},{key:"handleMessage",value:function(e){var t=this;if("JSCore"==e.targetType)return this.handleMessageForJSCore(e);if("Host"==e.targetType)return this.sendMessageToHost(e);if("Parent"==e.targetType)return this.sendMessageToAppletParent(e);if("*"==e.targetID)this.broadcastMessage(e);else{if("CoreExt"==e.targetType)return this.sendMessageToCoreExt(e);if("Applet"==e.targetType)return this.sendMessageToApplet(e);if(this._moduleRoleMap.has(e.targetType)){if(void 0!=e.isAsync&&!e.isAsync)return this._moduleRoleMap.get(e.targetType).handleMessage(e);setTimeout(function(){t._moduleRoleMap.get(e.targetType).handleMessage(e)},0)}else this.sendMessageToHost(e)}return!0}},{key:"handleMessageForJSCore",value:function(e){var t=e.message;if("LoadModule"==t){var n=new a.default(e.data,e.sourceID,e.sourceVersion,e.sourceInstanceID,this._ccxCoreObj);return this.loadModule(n,e.data),!0}if("RegisterModule"==t){var r=new a.default(e.data,e.sourceID,e.sourceVersion,e.sourceInstanceID,this._ccxCoreObj);return!!r.register(e.data.moduleObject,e.data)&&(this._loadedModules.set(r._id,r),r._role&&this._moduleRoleMap.set(r._role,r),this._registerModuleWithNativeCore(r),!0)}if("UnloadModule"==t||"UnregisterModule"==t)return!this._loadedModules.has(e.data.id)||this._loadedModules.delete(e.data.id)}},{key:"loadModule",value:function(e,t){this._loadingModules.set(e._id,e),e.load(t,function(n){if(this._loadingModules.delete(e._id),n.status&&(this._loadedModules.set(e._id,e),e._role&&this._moduleRoleMap.set(e._role,e),this._registerModuleWithNativeCore(e)),t.statusCallback){if("function"==typeof t.statusCallback)try{t.statusCallback(n)}catch(e){o.default.error("CoreMessageManager: Exception in onLoad callback: ",e)}else if("string"==typeof t.statusCallback)try{this.sendMessageToHost({targetType:"Host",message:t.statusCallback,data:n})}catch(e){o.default.error("CoreMessageManager: Exception in onLoad callback: ",e)}}else o.default.warn("CoreMessageManager: onLoad callback not present.")}.bind(this))}},{key:"loadCoreExtension",value:function(e){var t=new a.default(e,"","","",this._ccxCoreObj);this._loadingModules.set(t._id,t),t.load({},function(e){this._loadingModules.delete(t._id),e.status&&this._loadedCoreExtensions.set(t._id,t)}.bind(this))}},{key:"_registerModuleWithNativeCore",value:function(e){this.sendMessageToHost({targetType:"Core",message:"RegisterApplet",data:{type:e._type,id:e._id,version:e._version,instanceID:e._instanceID,path:e._path}})}},{key:"sendMessageToHost",value:function(e){var t=this;return void 0!=e.isInterCoreMsg&&e.isInterCoreMsg?o.default.warn("CoreMessageManager: Not sending interCoreMsg back to host. Message: ",e):(e.isInterCoreMsg=!0,setTimeout(function(){t._ccxCoreObj._hostMessageHandlerFn(e)},0)),!0}},{key:"sendMessageToAppletParent",value:function(e){var t=this,n=this._loadedModules.get(e.sourceID).getParent();if(n){if(this._loadedModules.has(n)){if(void 0!=e.isAsync&&!e.isAsync)return this._loadedModules.get(n).handleMessage(e);setTimeout(function(){t._loadedModules.get(n).handleMessage(e)},0)}}else this.sendMessageToHost(e);return!0}},{key:"broadcastMessage",value:function(e){if("CoreExt"==e.targetType||"*"==e.targetType||"**"==e.targetType){var t=!0,n=!1,i=void 0;try{for(var a,o=function(){var t=r(a.value,2),n=t[0],i=t[1];n!==e.sourceID&&setTimeout(function(){i.handleMessage(e)},0)},s=this._loadedCoreExtensions[Symbol.iterator]();!(t=(a=s.next()).done);t=!0)o()}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}}if("Applet"==e.targetType||"*"==e.targetType||"**"==e.targetType){var u=!0,c=!1,l=void 0;try{for(var f,d=function(){var t=r(f.value,2),n=t[0],i=t[1];n!==e.sourceID&&setTimeout(function(){i.handleMessage(e)},0)},h=this._loadedModules[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)d()}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}"Remote"!=e.targetType&&"**"!=e.targetType||this.sendMessageToHost(e)}},{key:"sendMessageToCoreExt",value:function(e){var t=this;if(this._loadedCoreExtensions.has(e.targetID)){if(void 0!=e.isAsync&&!e.isAsync)return this._loadedCoreExtensions.get(e.targetID).handleMessage(e);setTimeout(function(){t._loadedCoreExtensions.get(e.targetID).handleMessage(e)},0)}else this._loadingModules.has(e.targetID)?o.default.error("CoreMessageManager: Cannot send message to CoreExt during loading state. Message: ",e):this.sendMessageToHost(e);return!0}},{key:"sendMessageToApplet",value:function(e){var t=this;if(this._loadedModules.has(e.targetID)){if(void 0!=e.isAsync&&!e.isAsync)return this._loadedModules.get(e.targetID).handleMessage(e);setTimeout(function(){t._loadedModules.get(e.targetID).handleMessage(e)},0)}else this._loadingModules.has(e.targetID)?o.default.error("CoreMessageManager: Cannot send message to Applet during loading state. Message: ",e):this.sendMessageToHost(e);return!0}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t,n){o(this,e),this._originalCoreObj=n,this._moduleObj=t}return i(e,[{key:"initialize",value:function(e){this._originalCoreObj(e)}},{key:"handleMessage",value:function(e){return e.sourceID||(e.sourceID=this._moduleObj._id),e.sourceVersion||(e.sourceVersion=this._moduleObj._version),e.sourceInstanceID||(e.sourceInstanceID=this._moduleObj._instanceID),e.isAsync=void 0==e.isAsync||e.isAsync,e.enableLog=void 0==e.enableLog||e.enableLog,e.sendViaMainThread=void 0!=e.sendViaMainThread&&e.sendViaMainThread,this._originalCoreObj.handleMessage(e)}},{key:"finalize",value:function(e){this._originalCoreObj.finalize(e)}}]),e}(),u=function(){function e(t,n,r,i,a){o(this,e),this._type=t.type,this._id=t.id,this._version=t.version,this._instanceID=t.instanceID,this._path=t.path,this._csspath=t.cssPath,this._role=t.role,this._dictionaryPath=t.dictionaryPath,this._parentID=n||"",this._parentVersion=r||"",this._parentInstanceID=i||"",this._instanceID||(this._instanceID=this._parentInstanceID),this._object=null,this._isLoaded=!1,this._coreObj=new s(this,a),this._originalCoreObj=a}return i(e,[{key:"getParent",value:function(){return this._parentID}},{key:"register",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(a.default.debug("CoreModule: Successfully loaded Module '",this._id,"'"),!(e&&"object"==(void 0===e?"undefined":r(e))&&e.initialize&&"function"==typeof e.initialize&&e.handleMessage&&"function"==typeof e.handleMessage&&e.finalize&&"function"==typeof e.finalize))return!1;this._object=e,this._isLoaded=!0;var i={hostObject:this._coreObj,type:this._type,id:this._id,version:this._version,instanceID:this._instanceID,path:this._path,initJSON:t.initData,dictionary:n};return!1!==this._object.initialize(i)}},{key:"getLocalizationStrings",value:function(e,t,n){var r=this._dictionaryPath+"/"+e+".json",i=new XMLHttpRequest;i.open("GET",r),i.onload=function(){"number"==typeof i.status&&i.status<400?t(JSON.parse(i.response)):(a.default.warn("Non-success code: "+i.status+" in loading localization strings for locale "+e),n())}.bind(this),i.onerror=function(){a.default.warn("Error in loading localization strings for locale "+e),n()}.bind(this),i.send()}},{key:"load",value:function(e,t){var n=this;if("OldApplet"!=this._type){var r=!this._dictionaryPath,i=null,o=null,s=document.createElement("script");if(s.type="text/javascript",s.src=this._path,s.onload=function(s){try{i=window[n._id]()}catch(s){a.default.error("Core: Module load exception: ",s,", messageData: ",e)}if(i){if(!0&&r){var u=n.register(i,e,o);t({status:u})}}else t({status:!1})},s.onerror=function(e){a.default.error("CoreModule: Error loading Module '",n._id,"': ",e),t({status:!1})},this._dictionaryPath&&this.getLocalizationStrings(e.locale,function(a){if(r=!0,o=a,i){var s=n.register(i,e,o);t({status:s})}},function(){if(r=!0,i){var a=n.register(i,e);t({status:a})}}),document.head.appendChild(s),this._csspath){var u=document.createElement("link");u.setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.href=this._csspath,document.head.appendChild(u)}return!0}this.loadOld(e,t)}},{key:"getEntity",value:function(){var e=new(window.Backbone.Model.extend({defaults:{id:this.oldAppletId,parentId:"",filePath:this._path,header:{targetID:this._id,targetVersion:"1.0",targetInstanceID:"1",sourceID:this._id.replace("_UI","_BL"),sourceVersion:"1.0",sourceInstanceID:"1"},order:0,isVisible:!1,isLoaded:!1,type:"panel",localizedName:"",children:[],needsAttention:!1,showBadge:!1,panelTab:null},setTab:function(e){e&&this.set("panelTab",e)}}));return e.on("change:localizedName",function(){this.moduleObj._originalCoreObj.handleMessage({targetType:"Applet",targetID:"JSContainer_UI",targetVersion:"1.0",message:"UpdatePanelDisplayName",data:{panelName:this.moduleObj._id,displayName:this.entity.attributes.localizedName}})},{entity:e,moduleObj:this}),e}},{key:"loadOld",value:function(e,t){this.oldAppletId=e.initData.divId;var n=this.getEntity();window.ccxCoreObj||(window.ccxCoreObj=this._originalCoreObj),window.require([this._path],function(e){a.default.info("JSCore: Old module loaded: ",n),e.registerMe(n),n.set("isLoaded",!0),t({status:!0})},function(e){a.default.error("JSCore: Old module load failed: ",e," entity: ",n),t({status:!1})})}},{key:"handleMessage",value:function(e){if("OldApplet"==this._type){var t=this.oldAppletId;return window.require(["interface/events"],function(n){var r=e;e.dataInXmlData?(r.xmlData={},r.xmlData.data=r.data):r.xmlData=r.data,delete e.dataInXmlData;try{n.trigger(t,{msg:r,type:e.message})}catch(e){a.default.error("JSCore: Exception in old Applet message trigger: ",e)}}),!0}return!(!this._object||!this._object.handleMessage||"function"!=typeof this._object.handleMessage)&&this._object.handleMessage(e)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=p(n(12)),a=n(3),o=p(n(4)),s=p(n(47)),u=p(n(50)),c=p(n(13)),l=(p(n(28)),p(n(5))),f=p(n(1)),d=p(n(17)),h=p(n(54));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v={__PAUSE__:0,__INIT__:1,__SYNC_TIMESTAMP__:2,__LOAD_UI__:3,__INIT_LONGPOLL__:4,__RESUME__:5,__NIL__:6},y=function(){function e(t){g(this,e),this._STATE=v.__PAUSE__,this._ccxCore=t,o.default.setClientCallback(this._ccxCore.handleMessage.bind(this._ccxCore))}return r(e,[{key:"_validateContext",value:function(){return!!this._context}},{key:"initContext",value:function(e){this._context=e,this._validateContext()?a.GlobalContext.initialize(this._context):f.default.error("EngineManager: initContext: Context validation failed.....")}},{key:"setState",value:function(e){this._STATE=e,this.executeStateMachine(),f.default.debug("EngineManager: setState - ",this._STATE)}},{key:"getState",value:function(){return this._STATE}},{key:"getFutureNotificationsObj",value:function(){return this._futureNotificationsObj}},{key:"addRequestInQueue",value:function(e){this.requestQueue||(this.requestQueue=new Array);var t=Object.assign({},e);t.targetID="UNCEngine",t.targetType="Applet",this.requestQueue.push(t)}},{key:"executeStateMachine",value:function(){setTimeout(function(){switch(this._STATE){case v.__INIT__:return this._validateContext()?(f.default.debug("EngineManager: executeStateMachine: __INIT__ - GlobalData initialized: ",a.GlobalData),void this.setState(v.__SYNC_TIMESTAMP__)):void f.default.error("EngineManager: executeStateMachine: __INIT__ - Context validation failed.....");case v.__SYNC_TIMESTAMP__:var e=c.default.createNotificationGetRequest(a.ServerConfigurationManager.serverShortPollUri);return e?(e.request.responseCallback=function(e){var t=this;(e=JSON.parse(e)).hasOwnProperty(l.default.ConfigurationKey)&&a.ServerConfigurationManager.setConfigParams(e[l.default.ConfigurationKey]),o.default.broadcastServerTimestamp(e["server-timestamp"]);try{this._context&&this._context.onReady&&"function"==typeof this._context.onReady&&setTimeout(function(){t._context.onReady()},0)}catch(e){f.default.warn("EngineManager: executeStateMachine: __LOAD_UI__ - Some exception occured while calling host callback",e)}this.setState(v.__LOAD_UI__)}.bind(this),e.request.errorCallback=function(e){var t=this;f.default.error("Network error: ",e);try{this._context&&this._context.onReady&&"function"==typeof this._context.onReady&&setTimeout(function(){t._context.onReady()},0)}catch(e){f.default.warn("EngineManager: executeStateMachine: __LOAD_UI__ - Some exception occured while calling host callback",e)}this.setState(v.__LOAD_UI__)}.bind(this),void new i.default(e.request).SendRequest(e.requestData)):(f.default.warn("EngineManager: executeStateMachine: __SYNC_TIMESTAMP__ - Unable to create httpRequest. Either AccessToken or AppID is not valid"),void this.setState(v.__LOAD_UI__));case v.__LOAD_UI__:return"desktop"!=a.GlobalData.surface&&this._ccxCore.handleMessage({targetType:"Applet",targetID:"UNCWidget",message:"Init",data:{}}),void(a.GlobalData.serverTimestampOnLaunch?this.setState(v.__INIT_LONGPOLL__):this.setState(v.__RESUME__));case v.__INIT_LONGPOLL__:return this._futureNotificationsObj||("desktop"==a.GlobalData.surface?this._futureNotificationsObj=new u.default(["devicePush","poll"]):this._futureNotificationsObj=new u.default(["webPush","poll"]),this._futureNotificationsObj.executeRequest()),void this.setState(v.__RESUME__);case v.__RESUME__:if(this._futureNotificationsObj&&this._futureNotificationsObj.resumeRequest(),this.requestQueue){for(var t=0;t<this.requestQueue.length;t++)this._ccxCore.handleMessage(this.requestQueue[t]);delete this.requestQueue,this.requestQueue=null}return void this.setState(v.__NIL__);default:return}}.bind(this),1)}}]),e}(),b=function(){function e(){g(this,e)}return r(e,[{key:"initialize",value:function(e){this._ccxCore=e.hostObject,this._manager=new y(this._ccxCore)}},{key:"handleMessage",value:function(e){var t=e.message;if("InitContext"!=t&&"UpdateUserProfile"!==t&&"RefreshUserProfile"!==t&&this._manager.getState()<v.__LOAD_UI__)this._manager.addRequestInQueue(e);else switch(t){case"InitContext":var n=e.data;return f.default.debug("UNCEngine: Initializing UNCEngine context: ",n),this._manager.initContext(n),void this._manager.setState(v.__INIT__);case"RefreshUserProfile":return void(this._manager.getState()!==v.__PAUSE__&&(f.default.debug("UNCEngine: handleMessage: RefreshUserProfile"),o.default.sendMessageToParent("RefreshUserProfile"),this._manager.setState(v.__PAUSE__)));case"UpdateUserProfile":return f.default.debug("UNCEngine: handleMessage: UpdateUserProfile"),void this._manager.setState(v.__RESUME__);case"RegisterObservers":return f.default.debug("UNCEngine: handleMessage: Registering observers - ",e),!!o.default.registerObserver(e);case"UnregisterObservers":return f.default.debug("UNCEngine: handleMessage: Unregistering observers - ",e),!!o.default.unregisterObserver(e);case"GetNotifications":return f.default.debug("UNCEngine: handleMessage: GetNotifications - ",e),(new s.default).getNotifications(e);case"PostNotifications":return f.default.debug("UNCEngine: handleMessage: PostNotifications - ",e),(new s.default).postNotifications(e);case"UpdateNotifications":return f.default.debug("UNCEngine: handleMessage: UpdateNotifications - ",e),(new s.default).updateNotifications(e);case"ClearBadge":return f.default.debug("UNCEngine: handleMessage: ClearBadge"),(new s.default).clearBadge(e);case"GetConfigurationSettings":return f.default.debug("UNCEngine: handleMessage: GetConfigurationSettings"),void a.ServerConfigurationManager.serveNotificationConfigurationRequest(e);case"UpdateAnalyticsConfig":if(f.default.debug("UNCEngine: handleMessage: UpdateAnalyticsConfig"),void 0!==e.data.analyticsEnabled){var r="true"===e.data.analyticsEnabled.toString().toLowerCase();r?(a.GlobalData.analyticsEnabled=r,d.default.sendAnalyticsForUserPreferenceForAnalytics(!0,"update")):d.default.sendAnalyticsForUserPreferenceForAnalytics(!1,"update"),o.default.sendUpdateAnalyticsConfigToWidget(e.data)}return;case"InitLongPoll":return f.default.debug("UNCEngine: handleMessage: InitLongPoll"),void this._manager.setState(v.__INIT_LONGPOLL__);case"UpdateMachineDeviceToken":f.default.debug("UNCEngine: handleMessage: UpdateMachineDeviceToken");var i=e.data.machineDeviceToken;if(i){if(a.GlobalData.machineDeviceToken=i,!a.GlobalData.isDevicePushEnabled)return void f.default.debug("UNCEngine: handleMessage: UpdateMachineDeviceToken device push not enabled");this._manager.getFutureNotificationsObj()&&(f.default.debug("UNCEngine: handleMessage: UpdateMachineDeviceToken going to check if device on longpoll"),this._manager.getFutureNotificationsObj().isCurrentCommunicationHandlerDevicePush()?this._manager.getFutureNotificationsObj().registerDevice():this._manager.getFutureNotificationsObj().switchToDevicePush())}return;case"DisableDevicePush":return f.default.debug("UNCEngine: handleMessage: DisableDevicePush"),a.GlobalData.isDevicePushEnabled=!1,e.data.pushDeviceID&&(a.GlobalData.pushDeviceID=e.data.pushDeviceID),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().switchToLongPoll());case"EnableDevicePush":return f.default.debug("UNCEngine: handleMessage: ",t),e.data.pushDeviceID&&(a.GlobalData.pushDeviceID=e.data.pushDeviceID),e.data.machineDeviceToken&&(f.default.debug("UNCEngine: handleMessage: MachineDeviceToken got machineDeviceToken"),a.GlobalData.machineDeviceToken==e.data.machineDeviceToken?f.default.debug("UNCEngine: handleMessage: MachineDeviceToken device token is same as previous one ignoring this msg"):a.GlobalData.machineDeviceToken=e.data.machineDeviceToken),a.GlobalData.machineDeviceToken||"macos"!=a.GlobalData.platform?(a.GlobalData.isDevicePushEnabled=!0,e.data.ChannelURI&&(f.default.info("UNCEngine: EnableDevicePush ChannelURI received",e.data.ChannelURI),a.GlobalData.context.ChannelURInew=e.data.ChannelURI,f.default.info("UNCEngine: GlobalData after is ",a.GlobalData)),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().switchToDevicePush())):void f.default.debug("UNCEngine: handleMessage: MachineDeviceToken is empty");case"NetworkIsOnline":case"FetchNotifications":return f.default.debug("UNCEngine: handleMessage: ",t),void(this._manager.getFutureNotificationsObj()&&(this._manager.getFutureNotificationsObj().fetchDevicePushNotifications(e.data),this._manager.getFutureNotificationsObj().forceNotificationsFetchIfLongpoll()));case"SignedOut":return f.default.debug("UNCEngine: handleMessage: SignedOut"),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().finalize());case"SigningOut":return f.default.debug("UNCEngine: handleMessage: SigningOut"),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().cancelRequest());case"GetNotificationPreference":return f.default.info("UNCEngine: handleMessage: GetNotificationPreference"),void h.default.getPreference(e.data);case"SetNotificationPreference":return f.default.info("UNCEngine: handleMessage: SetNotificationPreference"),void h.default.setPreference(e.data);default:f.default.debug("UNCEngine: handleMessage: default - Triggering default action.....")}}},{key:"finalize",value:function(e){}}]),e}();t.default=b,window.UNCEngine=function(){return new b}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(41)),o=l(n(42)),s=l(n(23)),u=l(n(43)),c=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._errorObject={statusCode:0,errorCode:""},t?(this.networkRequestObj=t,this._setNetworkRequestScheme()):(this._errorObject.statusCode=s.default.InvalidRequest,this.onError(this._errorObject))}return i(e,[{key:"sendRequest",value:function(e){this._errorObject.statusCode<0?c.default.warn("Skynet: NetworkCommunicatorImpl: sendRequest - Request failed to create(Error Code: ",this._errorObject.errorCode,"). Ignoring request"):(this._setRequestData(e),this._handleRequest(this.networkRequestObj.scheme))}},{key:"getResponseHeaders",value:function(){if(this.currentRequestObj)return this.currentRequestObj.getResponseHeaders()}},{key:"cancelRequest",value:function(){this.currentRequestObj&&this.currentRequestObj.cancelRequest()}},{key:"_setNetworkRequestScheme",value:function(){if(!this.networkRequestObj.scheme){var e=this.networkRequestObj.hostname;e&&-1!=e.indexOf("://")&&(this.networkRequestObj.scheme=e.split("://")[0])}this.networkRequestObj.scheme||(this._errorObject.statusCode=s.default.UrlSchemeMissing,this.onError(this._errorObject))}},{key:"_setRequestData",value:function(e){e.queryParams&&(this.networkRequestObj.queryParams=e.queryParams),e.requestHeaders&&(this.networkRequestObj.requestHeaders=e.requestHeaders),e.timeoutInSec&&(this.networkRequestObj.timeoutInSec=e.timeoutInSec),e.content&&(this.networkRequestObj.content=e.content),e.responseType&&(this.networkRequestObj.responseType=e.responseType)}},{key:"_sanityCheck",value:function(){return this.networkRequestObj.scheme&&"string"==typeof this.networkRequestObj.scheme?this.networkRequestObj.hostname&&"string"==typeof this.networkRequestObj.hostname?this.networkRequestObj.methodType&&"string"==typeof this.networkRequestObj.methodType?(this.networkRequestObj.port&&"string"==typeof this.networkRequestObj.port||(this.networkRequestObj.port=""),this.networkRequestObj.path&&"string"==typeof this.networkRequestObj.path||(this.networkRequestObj.path=""),this.networkRequestObj.content&&"string"==typeof this.networkRequestObj.content||(this.networkRequestObj.content=""),this.networkRequestObj.queryParams&&"object"===r(this.networkRequestObj.queryParams)||(this.networkRequestObj.queryParams={}),this.networkRequestObj.requestHeaders&&"object"===r(this.networkRequestObj.requestHeaders)||(this.networkRequestObj.requestHeaders={}),this.networkRequestObj.timeoutInSec&&"number"==typeof this.networkRequestObj.timeoutInSec||(this.networkRequestObj.timeoutInSec=0),this.networkRequestObj.responseCallback&&"function"==typeof this.networkRequestObj.responseCallback||(this.networkRequestObj.responseCallback=function(){}),this.networkRequestObj.errorCallback&&"function"==typeof this.networkRequestObj.errorCallback||(this.networkRequestObj.errorCallback=function(){}),s.default.Success):(c.default.debug("Skynet: NetworkCommunicatorImpl: _sanityCheck - Request methodType(HEAD/GET/POST/PUT/DELETE) is missing. Ignoring request"),s.default.MethodTypeMissing):(c.default.debug("Skynet: NetworkCommunicatorImpl: _sanityCheck - Url hostname is missing. Ignoring request"),s.default.UrlHostnameMissing):(c.default.debug("Skynet: NetworkCommunicatorImpl: _sanityCheck - Url scheme is missing. Ignoring request"),s.default.UrlSchemeMissing)}},{key:"_handleRequest",value:function(e){c.default.debug("Skynet: NetworkCommunicatorImpl: _handleRequest -  Handling request.....");var t=this._sanityCheck(),n={};if(t!=s.default.Success)return n.statusCode=t,void this.onError(n);switch(e){case"wss":case"ws":this._handleWebSocketRequest();break;case"https":case"http":this._handleHttpRequest();break;default:n.statusCode=s.default.UnSupportedUrlScheme,this.onError(n)}}},{key:"_addCommonRequestParameters",value:function(){this.currentRequestObj.requestHeaders=this.networkRequestObj.requestHeaders,this.currentRequestObj.methodType=this.networkRequestObj.methodType,this.currentRequestObj.content=this.networkRequestObj.content,this.currentRequestObj.responseCallback=this.networkRequestObj.responseCallback,this.currentRequestObj.errorCallback=this.onError.bind(this),this.networkRequestObj.responseType&&""!==this.networkRequestObj.responseType&&(this.currentRequestObj.responseType=this.networkRequestObj.responseType)}},{key:"_handleWebSocketRequest",value:function(){var e={};e.statusCode=s.default.UnSupportedUrlScheme,this.onError(e)}},{key:"_handleHttpRequest",value:function(){if(this.currentRequestObj=new a.default,!this.currentRequestObj){c.default.debug("Skynet: NetworkCommunicatorImpl: _handleHttpRequest - Cannot create HttpCommunicator instance");var e={};return e.statusCode=s.default.InsufficientMemory,void this.onError(e)}this._addCommonRequestParameters(),this.currentRequestObj.url=u.default.createUrl(this.networkRequestObj.scheme,this.networkRequestObj.hostname,this.networkRequestObj.port,this.networkRequestObj.path,this.networkRequestObj.queryParams),this.currentRequestObj.timeout=1e3*this.networkRequestObj.timeoutInSec,this.currentRequestObj.sendRequest()}},{key:"onError",value:function(e){delete this.currentRequestObj,this._errorObject.statusCode=e.statusCode,this._errorObject.errorCode=o.default.getErrorCode("https",e.statusCode);try{this.networkRequestObj.errorCallback&&this.networkRequestObj.errorCallback(this._errorObject)}catch(e){c.default.error("Skynet: NetworkCommunicatorImpl: onError - Caught exception inside calling client's error callback. Exception: ",e," Exception Message ",e.message)}}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(23)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._errorObject={statusCode:0}}return r(e,[{key:"_sanityCheck",value:function(){return["HEAD","GET","POST","PUT","DELETE"].indexOf(this.methodType)>i.default.IndexNotFound?i.default.Success:(a.default.debug("Skynet: HttpRequestHandler - HTTP Request Method ",this.methodType," is not supported!!"),i.default.UnSupportedMethod)}},{key:"_setRequestHeaders",value:function(){if(a.default.debug("Skynet: HttpRequestHandler: _setRequestHeaders - Inside SetRequest Headers"),this.requestHeaders)for(var e in a.default.debug("Skynet: HttpRequestHandler: _setRequestHeaders - Request Headers",this.requestHeaders),this.requestHeaders)this.httpRequest.setRequestHeader(e,this.requestHeaders[e])}},{key:"getResponseHeaders",value:function(){var e={};if(this.httpRequest){var t=this.httpRequest.getAllResponseHeaders();if(a.default.debug(t),!t)return e;if(-1!==t.indexOf("\r"))for(var n=t.split("\r"),r=0,i=n.length;r<i;r++){var o=n[r];-1!==o.indexOf("\n")?this._addHeadersFromStringByNewlineSeparation(o,e):this._addKeyValuePairs(o,e)}else-1!==t.indexOf("\n")?this._addHeadersFromStringByNewlineSeparation(t,e):this._addKeyValuePairs(t,e)}return e}},{key:"_addHeadersFromStringByNewlineSeparation",value:function(e,t){if(e&&""!==e)for(var n=e.split("\n"),r=0,i=n.length;r<i;r++){var a=n[r];a&&""!==a&&this._addKeyValuePairs(a,t)}}},{key:"_addKeyValuePairs",value:function(e,t){if(e&&""!==e&&-1!==e.indexOf(":")){var n=e.split(":"),r=n[0];if(r&&""!==r){r=r.trim();var i=n[1];i&&""!==i&&(i=i.trim(),t[r]=i)}}}},{key:"cancelRequest",value:function(){this.httpRequest&&this.httpRequest.abort()}},{key:"sendRequest",value:function(){var e=this._sanityCheck();if(e<0){this._errorObject.statusCode=e;try{if(this.errorCallback)return this.errorCallback(this._errorObject)}catch(e){a.default.error("Skynet: HttpRequestHandler: sendRequest - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}if(!window.XMLHttpRequest){a.default.debug("Skynet: HttpRequestHandler: sendRequest - XMLHttpRequest is not supported in browser!!"),this._errorObject.statusCode=i.default.UnSupportedBrowser;try{if(this.errorCallback)return this.errorCallback(this._errorObject)}catch(e){a.default.error("Skynet: HttpRequestHandler: sendRequest - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}if(this.httpRequest=new XMLHttpRequest,!this.httpRequest){a.default.debug("Skynet: HttpRequestHandler: sendRequest - Cannot create an XMLHTTP instance"),this._errorObject.statusCode=i.default.InsufficientMemory;try{if(this.errorCallback)return this.errorCallback(this._errorObject)}catch(e){a.default.error("Skynet: HttpRequestHandler: sendRequest - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}this.httpRequest.onload=this.handleServerResponse.bind(this),this.httpRequest.onerror=this.handleError.bind(this),this.httpRequest.ontimeout=this.handleTimeout.bind(this),this.responseType&&""!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.open(this.methodType,this.url),this._setRequestHeaders(),this.timeout?this.httpRequest.timeout=this.timeout:this.httpRequest.timeout=6e4,this.content?this.httpRequest.send(this.content):this.httpRequest.send()}},{key:"_isResponseSuccessful",value:function(){return this.httpRequest.status>=200&&this.httpRequest.status<400}},{key:"handleServerResponse",value:function(){if(this._isResponseSuccessful()){a.default.debug("Skynet: HttpRequestHandler: handleServerResponse - Request is successfuly completed");try{this.responseCallback&&(this.httpRequest.responseType&&""!==this.httpRequest.responseType?this.responseCallback(this.httpRequest.response):this.responseCallback(this.httpRequest.responseText))}catch(e){a.default.error("Skynet: HttpRequestHandler: handleServerResponse - Caught exception in calling response callback. Exception: ",e," Exception Message ",e.message)}}else{a.default.debug("Skynet: HttpRequestHandler: handleServerResponse - Request failed to complete successfuly"),this._errorObject.statusCode=this.httpRequest.status;try{this.errorCallback&&this.errorCallback(this._errorObject)}catch(e){a.default.error("Skynet: HttpRequestHandler: handleServerResponse - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}}},{key:"handleTimeout",value:function(){a.default.debug("Skynet: HttpRequestHandler: handleTimeout - Timeout occurred in request"),this._errorObject.statusCode=i.default.TimeoutError;try{this.errorCallback&&this.errorCallback(this._errorObject),this.httpRequest.abort()}catch(e){a.default.error("Skynet: HttpRequestHandler: handleTimeout - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}},{key:"handleError",value:function(){a.default.debug("Skynet: HttpRequestHandler: handleError - Error occurred in request"),this._errorObject.statusCode=i.default.NetworkFailure;try{this.errorCallback&&this.errorCallback(this._errorObject)}catch(e){a.default.error("Skynet: HttpRequestHandler: handleError - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getErrorCode",value:function(t,n){switch(n){case-1:return"UnSupported_Browser";case-2:return"Insufficient_Memory";case-3:return"UnSupported_Url_Scheme";case-4:return"UnSupported_Method_Type";case-5:return"Url_Scheme_Missing";case-6:return"Url_Hostname_Missing";case-7:return"Method_Type_Missing";case-8:return"Request_Timeout";case-9:return"Network_Failure";case-10:return"InvalidRequest";default:return e._getSchemeBasedErrorCodes(t,n)}}},{key:"_getSchemeBasedErrorCodes",value:function(t,n){switch(t){case"wss":case"ws":return e._getErrorCodesForWebsocketRequest(n);case"https":case"http":return e._getErrorCodesForHttpRequest(n)}}},{key:"_getErrorCodesForWebsocketRequest",value:function(e){return"UnSupported_Url_Scheme"}},{key:"_getErrorCodesForHttpRequest",value:function(e){switch(e){case 200:case 304:return"Success";case 400:return"Bad_Request";case 401:return"Unauthorized";case 403:return"Forbidden";case 404:return"Resource_Not_Found";case 407:return"Proxy_Authentication_Required";case 408:return"Request_Timeout";case 429:return"Too_Many_Requests";case 500:return"Internal_Server_Error";case 501:return"Request_Not_Implemented";case 502:return"Bad_Gateway";case 503:return"Service_Unavailable";case 504:return"Gateway_Timeout";default:return e>400&&e<500?"Client_Request_Error":e>=500&&e<600?"Server_Response_Error":"Invalid_Request"}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"addUrlQueryParams",value:function(e,t){if("undefined"!==t&&"object"===(void 0===t?"undefined":r(t)))for(var n in t){n=encodeURIComponent(n);var i=encodeURIComponent(t[n]);e+=(e.split("?")[1]?"&":"?")+n+"="+i}return e}},{key:"createUrl",value:function(t,n,r,i,a){var o=t+"://",s="";return-1==n.indexOf(o)&&(s=o),s+=n+r+i,e.addUrlQueryParams(s,a)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(1)),a=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var s=120,u=10,c=8192,l="https://ans.oobesaas.adobe.com",f="https://stg-ans.oobesaas.adobe.com",d="https://notify.adobe.io",h="https://notify-stage.adobe.io",p="/ans/v2/notifications/timeline",g="/ans/v1/notifications",v="/ans/v2/notifications/longpoll",y="/ans/v2/notifications/count",b="/ans/v2/notifications/search",m="/ans/v2/device/",_=1,C=540,k=.1,S="/ans/v2/preferences/category/user",N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.notificationConfiguration={}}return r(e,[{key:"initialize",value:function(e){this.pollingInterval=s,this.pageSize=u,this.payloadSize=c,this.serverShortPollUri=g,this.serverBackFillUri=p,this.serverLongPollUri=v,this.serverNotificationUnreadCountURI=y,this.serverNotificationSearchURI=b,this.serverDeviceRegisterUnRegisterURI=m,this.longPollEnabled=_,this.longPollTimeout=C,this.configVersion=k,this.serverUserPreferencesURI=S,"prod"===e.env?(this.serverBaseUrl=l,this.serverBaseAdobeIOUrl=d):(this.serverBaseUrl=f,this.serverBaseAdobeIOUrl=h)}},{key:"_setConfigParamsHelper",value:function(e,t){switch(e){case"NEPollingInterval":this.pollingInterval=parseInt(t);break;case"NEPageSize":this.pageSize=parseInt(t);break;case"NEPayloadSize":this.payloadSize=parseInt(t);break;case"NEServerBaseURL":this.serverBaseUrl=t;break;case"NEServerAdobeIOBaseURL":this.serverBaseAdobeIOUrl=t;break;case"NEServerURI":this.serverShortPollUri=t;break;case"NEServerURILongPoll":this.serverLongPollUri=t;break;case"NELongPollEnabled":this.longPollEnabled=1===parseInt(t);break;case"NELongPollTimeout":this.longPollTimeout=parseInt(t)}}},{key:"setConfigParams",value:function(e){this.notificationConfiguration=e;for(var t=e["config-params"]["config-param"],n=0;n<t.length;n++){var r=t[n];this._setConfigParamsHelper(r.key,r.value[0])}e.hasOwnProperty("complete-version")?this.configVersion=e["complete-version"]:this.configVersion=e.version,i.default.debug("configurations",this)}},{key:"serveNotificationConfigurationRequest",value:function(e){a.default.sendMessageToApplet(e.data.namespace,this.notificationConfiguration,e.sourceID)}}]),e}();t.default=N},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(n(3),function(e){return e&&e.__esModule?e:{default:e}}(n(1)));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hostObservers=new Map,this._sourcePropertySeparator="|*#%"}return i(e,[{key:"_preprocessHostObserversList",value:function(e){if(!e||"object"!=(void 0===e?"undefined":r(e))||!e.callbackFn||"function"!=typeof e.callbackFn)return!1;e.observersList&&Array.isArray(e.observersList)||(e.observersList&&(e.observersList.type||e.observersList.subtype)?e.observersList=[{type:e.observersList.type?e.observersList.type:"*",subtype:e.observersList.subtype?e.observersList.subtype:"*"}]:e.observersList=[{type:"*",subtype:"*"}]);for(var t=0;t<e.observersList.length;t++)e.observersList[t].type=e.observersList[t].type?e.observersList[t].type:"*",e.observersList[t].subtype=e.observersList[t].subtype?e.observersList[t].subtype:"*";return!0}},{key:"_addRule",value:function(e,t){var n=e.version;void 0==n&&(n="");var r=e.id+this._sourcePropertySeparator+n,i=e.observersList,a=e.requestContext;void 0===a&&(a="");for(var o=e.callbackFn,s=0;s<i.length;s++){var u=i[s].type,c=i[s].subtype;this._hostObservers.has(r)||this._hostObservers.set(r,new Set),this._hostObservers.get(r).add({mode:t,type:u,subType:c,callbackFn:o,requestContext:a})}return!0}},{key:"_getHostListenersList",value:function(e,t){var n=new Set;return this._hostObservers.forEach(function(r,i){var a=!1,o=void 0,s=void 0;r.forEach(function(n,r){"*"!=n.type&&n.type!=e||"*"!=n.subType&&n.subType!=t||(a="+"==n.mode,o=n.callbackFn,s=n.requestContext)}),a&&n.add({callBackFunc:o,requestContext:s})}),n}},{key:"registerObserver",value:function(e){return!!this._preprocessHostObserversList(e.data)&&this._addRule(e.data,"+")}},{key:"unregisterObserver",value:function(e){return!!this._preprocessHostObserversList(e.data)&&this._addRule(e.data,"-")}},{key:"notifyObservers",value:function(e){for(var t=this,n=function(n){t._getHostListenersList(e[n].type,e[n]["sub-type"]).forEach(function(t){var r={notifications:{notification:[e[n]]}};try{var i=void 0;i=t.requestContext?{requestContext:t.requestContext,data:r}:{data:r},t.callBackFunc&&"function"==typeof t.callBackFunc&&t.callBackFunc(i)}catch(e){a.default.error("HostClientNotificationDispatcher: notifyObservers - Callback exception: ",e)}}.bind(t))},r=0;r<e.length;++r)n(r);return!0}}]),e}();t.default=new o},function(e,t){e.exports=UNCIngest},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(o(n(1)),o(n(48))),a=o(n(49));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getNotifications",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new a.default,t=this.currentRequestHandler.getNotifications(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.getNotifications(e)):t=!1,t}},{key:"postNotifications",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new a.default,t=this.currentRequestHandler.postNotifications(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.postNotifications(e)):t=!1,t}},{key:"updateNotifications",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new a.default,t=this.currentRequestHandler.updateNotifications(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.updateNotifications(e)):t=!1,t}},{key:"clearBadge",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new a.default,t=this.currentRequestHandler.clearBadge(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.clearBadge(e)):t=!1,t}},{key:"cancelRequest",value:function(){this.currentRequestHandler&&this.currentRequestHandler.cancelRequest()}},{key:"finalize",value:function(){this.cancelRequest(),delete this.currentRequestHandler}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=d(n(13)),o=n(3),s=d(n(12)),u=d(n(18)),c=d(n(4)),l=d(n(1)),f=d(n(26));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"_sanitizeGetNotificationRequest",value:function(e){if(!e||"object"!==(void 0===e?"undefined":r(e)))return l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - Get Notification Request Data can't be empty"),!1;if(!e.namespace||"string"!=typeof e.namespace)return l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'namespace' field can't be empty in ",this.type," Notification Request"),!1;if(e.timestamp&&"number"!=typeof e.timestamp&&(e.timestamp=parseInt(e.timestamp),isNaN(e.timestamp)))return l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'timestamp' field Data Type must be 'number'"),!1;if(e.type&&"string"!=typeof e.type)return l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'type' field Data Type must be 'string'"),!1;if(e.subtype&&"string"!=typeof e.subtype)return l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'subtype' field Data Type must be 'string'"),!1;if(e.pinned&&"boolean"!=typeof e.pinned){var t=e.pinned.toString();if("true"==t.toLowerCase())e.pinned=!0;else{if("false"!=t.toLowerCase())return l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'pinned' field Data Type must be 'boolean'"),!1;e.pinned=!1}}return!e.requestContext||"string"==typeof e.requestContext||(l.default.debug("NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'requestContext' field Data Type must be 'string'"),!1)}},{key:"_sanitizePostOrUpdateNotificationRequest",value:function(e){return e&&"object"===(void 0===e?"undefined":r(e))?e.content&&"string"==typeof e.content?e.target&&"string"!=typeof e.target?(l.default.debug("NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'target' field Data Type must be 'string'"),!1):e.additionalInfo&&e.additionalInfo.requestContext&&"string"!=typeof e.additionalInfo.requestContext?(l.default.debug("NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'additionalInfo.requestContext' field Data Type must be 'string'"),!1):!e.additionalInfo||!e.additionalInfo.namespace||"string"==typeof e.additionalInfo.namespace||(l.default.debug("NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'additionalInfo.namespace' field Data Type must be 'string'"),!1):(l.default.warn("NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'content' field can't be empty in ",this.type," Notification request"),!1):(l.default.debug("NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - Post Notification Request Data can't be empty"),!1)}},{key:"_sendRequestToServer",value:function(e){return e.request.responseCallback=this.onResponse.bind(this),e.request.errorCallback=this.onError.bind(this),this._currentCommunicationHandler=new s.default(e.request),!!this._currentCommunicationHandler&&(this._currentCommunicationHandler.SendRequest(e.requestData),!0)}},{key:"_sendPostOrUpdateRequestToServer",value:function(e){if(!this._sanitizePostOrUpdateNotificationRequest(e))return!1;if(!e.target||"server"===e.target){e.additionalInfo&&(this.requestContext=e.additionalInfo.requestContext,this.namespace=e.additionalInfo.namespace);var t={};return!!(t="POST"===this.type?a.default.createNotificationPostRequest(e.content):a.default.createNotificationPutRequest(e.content))&&this._sendRequestToServer(t)}var n=new Array,r=JSON.parse(e.content);if(!r||!r.notifications||!r.notifications.notification)return l.default.warn("NotificationRequestManagerInternal: _sendPostOrUpdateRequestToServer - Invalid content in request. Ignore processing."),!1;for(var i=r.notifications.notification,o=0;o<i.length;o++)n.push(i[o]);return c.default.notifyObservers(n),!0}},{key:"_addNotificationSearchQueryCriteria",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EQ",i={};i.field=t,i.value=n,i.operator=r,e.push(i)}},{key:"_createNotificationGetRequest",value:function(e){if(e.criteria)return a.default.createNotificationCriteriaBasedSearchRequest(e.criteria);if(e.type||e.subtype||e.pinned||e.state){var t={};t.AND=new Array,e.type&&this._addNotificationSearchQueryCriteria(t.AND,"type",e.type),e.subtype&&this._addNotificationSearchQueryCriteria(t.AND,"sub-type",e.subtype),e.pinned&&this._addNotificationSearchQueryCriteria(t.AND,"metadata.pinned",e.pinned),e.state&&this._addNotificationSearchQueryCriteria(t.AND,"state",e.state),e.timestamp&&this._addNotificationSearchQueryCriteria(t.AND,"sort-timestamp",e.timestamp,"LE");var n={};return n.limit=o.ServerConfigurationManager.pageSize.toString(),n.locale=o.GlobalData.locale,n.criteria=t,a.default.createNotificationCriteriaBasedSearchRequest(n)}return a.default.createNotificationGetRequest(o.ServerConfigurationManager.serverBackFillUri,e.timestamp)}},{key:"getNotifications",value:function(e){if(!this._sanitizeGetNotificationRequest(e.data))return!1;this.type="GET",this.sourceID=e.sourceID;var t=e.data;this.namespace=t.namespace,this.requestContext=t.requestContext;var n=this._createNotificationGetRequest(t);return!!n&&this._sendRequestToServer(n)}},{key:"postNotifications",value:function(e){return this.type="POST",this.sourceID=e.sourceID,this._sendPostOrUpdateRequestToServer(e.data)}},{key:"updateNotifications",value:function(e){return this.type="PUT",this.sourceID=e.sourceID,this._sendPostOrUpdateRequestToServer(e.data)}},{key:"clearBadge",value:function(e){this.type="ClearBadge";var t=a.default.createNotificationBadgeClearRequest(e.data);return!!t&&this._sendRequestToServer(t)}},{key:"cancelRequest",value:function(){this._currentCommunicationHandler&&this._currentCommunicationHandler.CancelRequest()}},{key:"onResponse",value:function(e){switch(l.default.debug("NotificationRequestManagerInternal: onResponse - response:->",e),this.type){case"GET":var t={};t.notificationResponseList=new Array,t.notificationResponseList.push(JSON.parse(e)),t.notify=!1,t.namespace=this.namespace,t.targetID=this.sourceID,setTimeout(u.default.processNotifications,0,t),f.default.resetErrorTypeFailureCount();break;case"POST":case"PUT":if(!this.namespace)break;var n={};n.content=JSON.parse(e),n.requestContext=this.requestContext,c.default.sendMessageToApplet(this.namespace,n,this.sourceID),l.default.debug(n);break;case"ClearBadge":l.default.debug("NotificationRequestManagerInternal: onResponse - Successfully cleared notifications Un-Read count")}}},{key:"_sendFetchRequestErrorResponse",value:function(e){c.default.sendMessageToApplet(this.namespace,e,this.sourceID)}},{key:"onError",value:function(e){switch(l.default.debug("Error :-",e),this.type){case"GET":var t=0;t=f.default.failedState?1e3*o.ServerConfigurationManager.pollingInterval:0,f.default._handleFetchError(e.errorCode),setTimeout(this._sendFetchRequestErrorResponse.bind(this,e),t);break;case"POST":case"PUT":if(!this.namespace)break;c.default.sendMessageToApplet(this.namespace,e,this.sourceID);break;case"ClearBadge":l.default.debug("NotificationRequestManagerInternal: onError - Error Occured: ",e.errorCode," on clearing notifications unread count")}if("Unauthorized"==e.errorCode||"InvalidRequest"==e.errorCode){c.default.sendMessageToApplet("RefreshUserProfile",{},"UNCEngine")}}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=d(n(13)),o=n(3),s=d(n(12)),u=d(n(18)),c=d(n(4)),l=d(n(1)),f=d(n(26));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"_sanitizeGetNotificationRequest",value:function(e){if(!e||"object"!==(void 0===e?"undefined":r(e)))return l.default.debug("HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - Get Notification Request Data can't be empty"),!1;if(!e.callbackFn||"function"!=typeof e.callbackFn)return l.default.debug("HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - 'callbackFn' field can't be empty in ",this.type," Notification Request"),!1;if(e.timestamp&&"number"!=typeof e.timestamp&&(e.timestamp=parseInt(e.timestamp),isNaN(e.timestamp)))return l.default.debug("HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - 'timestamp' field Data Type must be 'number'"),!1;if(e.typeSubtypesList&&!Array.isArray(e.typeSubtypesList))return!1;if(e.pinned&&"boolean"!=typeof e.pinned){var t=e.pinned.toString();if("true"==t.toLowerCase())e.pinned=!0;else{if("false"!=t.toLowerCase())return l.default.debug("HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - 'pinned' field Data Type must be 'boolean'"),!1;e.pinned=!1}}return!0}},{key:"_sanitizePostOrUpdateNotificationRequest",value:function(e){return e&&"object"===(void 0===e?"undefined":r(e))?e.content&&"string"==typeof e.content?e.target&&"string"!=typeof e.target?(l.default.debug("HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - 'target' field Data Type must be 'string'"),!1):!e.callbackFn||"function"==typeof e.callbackFn||(l.default.debug("HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - 'callbackFn' field Data Type must be 'function'"),!1):(l.default.warn("HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - 'content' field can't be empty in ",this.type," Notification request"),!1):(l.default.debug("HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - Post Notification Request Data can't be empty"),!1)}},{key:"_sendRequestToServer",value:function(e){return e.request.responseCallback=this.onResponse.bind(this),e.request.errorCallback=this.onError.bind(this),this._currentCommunicationHandler=new s.default(e.request),!!this._currentCommunicationHandler&&(this._currentCommunicationHandler.SendRequest(e.requestData),!0)}},{key:"_sendPostOrUpdateRequestToServer",value:function(e){if(!this._sanitizePostOrUpdateNotificationRequest(e))return!1;if(!e.target||"server"===e.target){e.callbackFn&&(this.callbackFn=e.callbackFn),e.requestContext&&(this.requestContext=e.requestContext);var t={};return!!(t="POST"===this.type?a.default.createNotificationPostRequest(e.content):a.default.createNotificationPutRequest(e.content))&&this._sendRequestToServer(t)}var n=new Array,r=JSON.parse(e.content);if(!r||!r.notifications||!r.notifications.notification)return l.default.warn("HostClientNotificationRequestManager: _sendPostOrUpdateRequestToServer - Invalid content in request. Ignore processing."),!1;for(var i=r.notifications.notification,o=0;o<i.length;o++)n.push(i[o]);return c.default.notifyObservers(n),!0}},{key:"_addNotificationSearchQueryCriteria",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EQ",i={};i.field=t,i.value=n,i.operator=r,e.push(i)}},{key:"_getCriterionObjectBasedOnRequestData",value:function(e){for(var t={},n=e.typeSubtypesList,r={OR:[]},i=0;i<n.length;i++){var a={AND:[]},o=n[i];a.AND.push({field:"type",value:o.type,operator:"EQ"}),a.AND.push({field:"sub-type",value:o.subtype,operator:"EQ"}),r.OR.push(a)}var s={AND:[]};if(s.AND.push(r),s.AND.push({field:"state",value:"EXPIRED",operator:"NE"}),e.timestamp>0){var u={AND:[]};u.AND.push(s);var c={field:"sort-timestamp",value:e.timestamp,operator:"LT"};u.AND.push(c),t=u}else t=s;return t}},{key:"_createNotificationGetRequest",value:function(e){if(e.criteria)return a.default.createNotificationCriteriaBasedSearchRequest(e.criteria);if(e.typeSubtypesList&&Array.isArray(e.typeSubtypesList)){var t=this._getCriterionObjectBasedOnRequestData(e),n={};return n.locale=o.GlobalData.locale,n.criteria=t,a.default.createNotificationCriteriaBasedSearchRequest(n)}return a.default.createNotificationGetRequest(o.ServerConfigurationManager.serverBackFillUri,e.timestamp)}},{key:"getNotifications",value:function(e){if(!this._sanitizeGetNotificationRequest(e.data))return!1;this.type="GET";var t=e.data;this.callbackFn=t.callbackFn,this.requestContext=t.requestContext;var n=this._createNotificationGetRequest(t);return!!n&&this._sendRequestToServer(n)}},{key:"postNotifications",value:function(e){return this.type="POST",this._sendPostOrUpdateRequestToServer(e.data)}},{key:"updateNotifications",value:function(e){return this.type="PUT",this._sendPostOrUpdateRequestToServer(e.data)}},{key:"clearBadge",value:function(e){this.type="ClearBadge";var t=a.default.createNotificationBadgeClearRequest(e.data);return!!t&&this._sendRequestToServer(t)}},{key:"cancelRequest",value:function(){this._currentCommunicationHandler&&this._currentCommunicationHandler.CancelRequest()}},{key:"onResponse",value:function(e){switch(l.default.debug("HostClientNotificationRequestManager: onResponse - response:->",e),this.type){case"GET":var t={};t.notificationResponseList=new Array,t.notificationResponseList.push(JSON.parse(e)),t.notify=!1,t.requestContext=this.requestContext,t.callbackFn=this.callbackFn,setTimeout(u.default.processNotifications,0,t),f.default.resetErrorTypeFailureCount();break;case"POST":case"PUT":if(!this.callbackFn)break;var n={};n.data=JSON.parse(e),this.requestContext&&(n.requestContext=this.requestContext);try{this.callbackFn&&"function"==typeof this.callbackFn&&this.callbackFn(n)}catch(e){l.default.error("HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}l.default.debug(n);break;case"ClearBadge":l.default.debug("HostClientNotificationRequestManager: onResponse - Successfully cleared notifications Un-Read count")}}},{key:"_sendFetchRequestErrorResponse",value:function(e){if(this.callbackFn){var t={};t.data=e,this.requestContext&&(t.requestContext=this.requestContext);try{this.callbackFn&&"function"==typeof this.callbackFn&&this.callbackFn(t)}catch(e){l.default.error("HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}}}},{key:"onError",value:function(e){switch(l.default.debug("Error :-",e),this.type){case"GET":var t=0;t=f.default.failedState?1e3*o.ServerConfigurationManager.pollingInterval:0,f.default._handleFetchError(e.errorCode),setTimeout(this._sendFetchRequestErrorResponse.bind(this,e),t);break;case"POST":case"PUT":if(!this.callbackFn)break;var n={};n.data=e,this.requestContext&&(n.requestContext=this.requestContext);try{this.callbackFn&&"function"==typeof this.callbackFn&&this.callbackFn(n)}catch(e){l.default.error("HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}break;case"ClearBadge":l.default.debug("HostClientNotificationRequestManager: onError - Error Occured: ",e.errorCode," on clearing notifications unread count")}if("Unauthorized"==e.errorCode||"InvalidRequest"==e.errorCode){c.default.sendMessageToApplet("RefreshUserProfile",{},"UNCEngine")}}},{key:"finalize",value:function(){cancelRequest(),delete this._currentCommunicationHandler}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=d(n(51)),a=d(n(52)),o=d(n(53)),s=d(n(19)),u=d(n(18)),c=d(n(4)),l=n(3),f=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setServerCommunicationPreferenceOrder(t),this._shouldResume=!1,this._currentPreferenceOrderIndex=0,this._futureNotificationsData=new s.default,this._initializationData={futureNotificationsData:this._futureNotificationsData,responseCallback:this.onResponse.bind(this),errorCallback:this.onError.bind(this)}}return r(e,[{key:"_setServerCommunicationPreferenceOrder",value:function(e){this._preferenceOrder=e}},{key:"registerDevice",value:function(){"devicePush"==this._preferenceOrder[this._currentPreferenceOrderIndex]&&this._currentCommunicationHandler.registerDevice()}},{key:"isCurrentCommunicationHandlerDevicePush",value:function(){return"devicePush"==this._preferenceOrder[this._currentPreferenceOrderIndex]}},{key:"switchToLongPoll",value:function(){"devicePush"==this._preferenceOrder[this._currentPreferenceOrderIndex]?(c.default.sendMessageToApplet("SendDevicePushDisabledAnalytics",{},"UNCEngine"),this._currentCommunicationHandler.cancelRequest(),delete this._currentCommunicationHandler,this._currentPreferenceOrderIndex=this._preferenceOrder.indexOf("poll"),this.executeRequest()):l.GlobalData.pushDeviceID&&new a.default(this._initializationData).unRegisterDevice()}},{key:"switchToDevicePush",value:function(){"devicePush"!=this._preferenceOrder[this._currentPreferenceOrderIndex]?(this._currentCommunicationHandler.cancelRequest(),delete this._currentCommunicationHandler,this._currentPreferenceOrderIndex=this._preferenceOrder.indexOf("devicePush"),this.executeRequest()):"windows"==l.GlobalData.platform&&l.GlobalData.context.ChannelURInew!=l.GlobalData.context.ChannelURI&&(f.default.warn("FutureNotificationsManager: Channel URI updated for Windows"),this._currentPreferenceOrderIndex=this._preferenceOrder.indexOf("devicePush"),this.executeRequest())}},{key:"fetchDevicePushNotifications",value:function(e){"devicePush"==this._preferenceOrder[this._currentPreferenceOrderIndex]&&this._currentCommunicationHandler.fetchNotificationsFromServer(e)}},{key:"forceNotificationsFetchIfLongpoll",value:function(){"poll"==this._preferenceOrder[this._currentPreferenceOrderIndex]&&this._currentCommunicationHandler.forceFetchNotificationsFromServer()}},{key:"executeRequest",value:function(){switch(this._preferenceOrder[this._currentPreferenceOrderIndex]){case"webPush":this._currentCommunicationHandler=new i.default(this._initializationData);break;case"devicePush":return"windows"==l.GlobalData.platform&&(l.GlobalData.context.ChannelURI=l.GlobalData.context.ChannelURInew),this._currentCommunicationHandler=new a.default(this._initializationData),void this._currentCommunicationHandler.registerDevice();case"poll":this._currentCommunicationHandler=new o.default(this._initializationData);break;default:f.default.warn("FutureNotificationsManager: executeRequest: default - Server Communication Preference Type: ",this.preferenceOrder[this._currentPreferenceOrderIndex]," is currently not supported"),onError("NotSupported")}this._currentCommunicationHandler.fetchNotificationsFromServer()}},{key:"resumeRequest",value:function(){this._shouldResume&&(this._shouldResume=!1,this._currentCommunicationHandler?this._currentCommunicationHandler.fetchNotificationsFromServer():this.executeRequest())}},{key:"onResponse",value:function(e){f.default.debug("FutureNotificationsManager: onResponse - Notification List to be notified",e);var t={};t.notificationResponseList=e,t.notify=!0,u.default.processNotifications(t)}},{key:"onError",value:function(e){switch(f.default.debug("FutureNotificationsManager: onError - Error :-",e),e){case"NotSupported":this._currentPreferenceOrderIndex++,this._currentPreferenceOrderIndex<this._preferenceOrder.length&&this.executeRequest();break;case"UnSupported_Browser":case"Insufficient_Memory":case"UnSupported_Url_Scheme":case"UnSupported_Method_Type":case"Url_Scheme_Missing":case"Url_Hostname_Missing":case"Method_Type_Missing":case"InvalidRequest":f.default.debug("FutureNotificationsManager: onError - Error encountered: ",e," Stopping Future Notification Fetch"),delete this._currentCommunicationHandler,this._shouldResume=!0;break;case"Unauthorized":c.default.sendMessageToApplet("RefreshUserProfile",{},"UNCEngine"),this._shouldResume=!0}}},{key:"cancelRequest",value:function(){this._currentCommunicationHandler.cancelRequest()}},{key:"finalize",value:function(){delete this._currentCommunicationHandler}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorCallback=t.errorCallback}return r(e,[{key:"fetchNotificationsFromServer",value:function(){this.errorCallback("NotSupported")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=(f(n(27)),f(n(13))),o=f(n(28)),s=f(n(5)),u=f(n(12)),c=f(n(4)),l=(f(n(19)),f(n(1)));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.futureNotificationsData=t.futureNotificationsData,this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.responseCallback=t.responseCallback,this.getFutureNotificationsData=!0,this.continueFetch=this.fetchingNotifications=!1,this.errorCallback=t.errorCallback,this.notificationResponseList=new Array,this.pollingFailureFlag=!1,this.requestFailureTypeAndCount={},this._initializeErrorTypeFailureCount()}return r(e,[{key:"_handleDeviceRegistrationResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("macos"==i.GlobalData.platform){var t=void 0,n=new Array;if(e.error){if(t=s.default.SwitchedToLongPollEvent,e.error.statusCode){var r={};r[s.default.DevicePushFailureErrorCode]=e.error.statusCode.toString(),n.push(r)}if(e.error.errorCode){var a={};a[s.default.DevicePushFailureReason]=e.error.errorCode,n.push(a)}delete e.error}else t=s.default.DevicePushSet;o.default.sendAnalytics(t,n)}if("windows"==i.GlobalData.platform){var u,l=void 0,f=new Array;if(u=s.default.SwitchedToLongPollEventWin,e.error){l=s.default.DevicePushDisabledWin;var d={};if(d[s.default.DevicePushFailureReasonWin]="ERROR_FROM_ANS",f.push(d),e.error.statusCode){var h={};h[s.default.DevicePushFailureErrorCode]=e.error.statusCode.toString(),f.push(h)}if(e.error.errorCode){var p={};p[s.default.DevicePushFailureReason]=e.error.errorCode,f.push(p)}delete e.error}else l=s.default.DevicePushEnabledWin;o.default.sendAnalytics(u,f,l)}c.default.sendMessageToApplet("DeviceRegistered",e,s.default.CONTAINER_BL)}},{key:"registerDevice",value:function(){if(!i.GlobalData.isDevicePushEnabled)return l.default.warn("DevicePushCommunicationHandler: registerDevice - DevicePush is currently disabled. Ignoring request"),i.GlobalData.pushDeviceID&&(l.default.warn("DevicePushCommunicationHandler: registerDevice - Unregistering the device from server"),this.unRegisterDevice()),c.default.sendMessageToApplet("SendDevicePushDisabledAnalytics",{},"UNCEngine"),c.default.sendMessageToApplet("DeviceRegistered",{},s.default.CONTAINER_BL),this.errorCallback("NotSupported");var e={};if(!(e=a.default.createDeviceRegistrationRequest())){if(i.GlobalData.machineDeviceToken)return l.default.warn("DevicePushCommunicationHandler: registerDevice - Unable to create httpRequest. AccessToken is not valid"),this.errorCallback("InvalidRequest");var t={error:{}};return t.error.errorCode=s.default.DeviceTokenNotAvailable,l.default.warn("DevicePushCommunicationHandler: registerDevice - Unable to create httpRequest. Machine Device Token is not available"),this._handleDeviceRegistrationResponse(t),this.errorCallback("NotSupported")}e.request.responseCallback=function(e){e=JSON.parse(e),i.GlobalData.pushDeviceID=e["device-id"],this._handleDeviceRegistrationResponse(e)}.bind(this),e.request.errorCallback=function(e){var t={};t.error=e,this._handleDeviceRegistrationResponse(t),l.default.error("DevicePushCommunicationHandler: registerDevice - Error Occured in Device Registration ",e),this.errorCallback("NotSupported")}.bind(this),new u.default(e.request).SendRequest(e.requestData)}},{key:"unRegisterDevice",value:function(){var e={};if(!(e=a.default.createDeviceUnRegistrationRequest()))return l.default.warn("DevicePushCommunicationHandler: unRegisterDevice - Unable to create httpRequest. Either AccessToken or AppID is not valid"),this.onError({errorCode:"InvalidRequest"});e.request.responseCallback=function(e){l.default.info("DevicePushCommunicationHandler: unRegisterDevice - Device is successfuly un-registered")}.bind(this),e.request.errorCallback=function(e){l.default.error("DevicePushCommunicationHandler: unRegisterDevice - Error Occured in Device UnRegistration ",e),this.errorCallback("NotSupported")}.bind(this),new u.default(e.request).SendRequest(e.requestData);c.default.sendMessageToApplet("DeviceUnRegistered",{},s.default.CONTAINER_BL),delete i.GlobalData.pushDeviceID}},{key:"_handlePollingRequestFailure",value:function(e){if(!this.pollingFailureFlag){var t=0,n=0;switch(e){case"Timeout":n=++this.requestFailureTypeAndCount.timeoutFailureCount,t=s.default.TimeOutErrorCountLimit;break;case"ClientFailure":n=++this.requestFailureTypeAndCount.clientFailureCount,t=s.default.ClientErrorCountLimit;break;case"ServerFailure":n=++this.requestFailureTypeAndCount.serverFailureCount,t=s.default.ServerErrorCountLimit;break;case"NetworkFailure":n=++this.requestFailureTypeAndCount.internalNetworkFailureCount,t=s.default.InternalNetworkErrorCountLimit}n==t&&(l.default.warn("DevicePushCommunicationHandler: _handlePollingRequestFailure - Polling failures of type:",e," has reached its failure count limit. Adding delay in successive Polls(if failure persisits)"),this.pollingFailureFlag=!0,this._initializeErrorTypeFailureCount())}}},{key:"_fetchNotificationsFromServerHelper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={},r=i.ServerConfigurationManager.serverShortPollUri;if(!(n=e||t?a.default.createNotificationGetRequest(r,t,e):a.default.createNotificationGetRequest(r,"",this.futureNotificationsData.nextFutureRequestTimestamp.toString())))return l.default.warn("DevicePushCommunicationHandler: fetchNotificationsFromServer - Unable to create httpRequest. Either AccessToken or AppID is not valid"),this.onError({errorCode:"InvalidRequest"});n.request.responseCallback=this.onResponse.bind(this),n.request.errorCallback=this.onError.bind(this),new u.default(n.request).SendRequest(n.requestData)}},{key:"_getCurrentUserID",value:function(){var e=c.default.sendMessageToParent("GetUserProfile",!1);return e?e.UserID:null}},{key:"_isFetchNotificationRequestValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getCurrentUserID();return e["ans-target-id"]&&e["ans-target-id"]!==t?(l.default.warn("DevicePushCommunicationHandler: _isFetchNotificationRequestValid - Current UserID: ",t,"does not match with: ",e["ans-target-id"]),!1):!e["ans-device-id"]||e["ans-device-id"]===i.GlobalData.pushDeviceID||(l.default.warn("DevicePushCommunicationHandler: _isFetchNotificationRequestValid - Current DeviceID: ",i.GlobalData.pushDeviceID,"does not match with: ",e["ans-device-id"]),!1)}},{key:"fetchNotificationsFromServer",value:function(e){i.GlobalData.pushDeviceID?this._isFetchNotificationRequestValid(e)&&(this.pollingFailureFlag?l.default.warn("DevicePushCommunicationHandler: fetchNotificationsFromServer - In an error condition. Ignoring Request"):this.fetchingNotifications?this.continueFetch=!0:(this.fetchingNotifications=!0,this._fetchNotificationsFromServerHelper())):l.default.warn("DevicePushCommunicationHandler: fetchNotificationsFromServer - Device is not yet registered with Server. Ignoring Request")}},{key:"_sanitizeFutureTimestamp",value:function(e){e&&this.futureNotificationsData.nextFutureRequestTimestamp-e>0&&(l.default.debug("DevicePushCommunicationHandler: _sanitizeFutureTimestamp - Next Future timestamp value doesn't seem correct. Setting it to current servertimestamp value"),this.futureNotificationsData.nextFutureRequestTimestamp=e)}},{key:"_initializeErrorTypeFailureCount",value:function(){this.requestFailureTypeAndCount.timeoutFailureCount=0,this.requestFailureTypeAndCount.clientFailureCount=0,this.requestFailureTypeAndCount.serverFailureCount=0,this.requestFailureTypeAndCount.internalNetworkFailureCount=0}},{key:"_resetPollingFailure",value:function(){this.pollingFailureFlag=!1,this._initializeErrorTypeFailureCount()}},{key:"_triggerNotificationFetchOperation",value:function(){var e=0;e=this.pollingFailureFlag?1e3*i.ServerConfigurationManager.pollingInterval:s.default.OneSecond,setTimeout(this._fetchNotificationsFromServerHelper.bind(this),e)}},{key:"onResponse",value:function(e){l.default.debug("DevicePushCommunicationHandler: onResponse - Notification:-> ",e);var t=JSON.parse(e),n=t.notifications.notification;this.notificationResponseList.push(t),this.getFutureNotificationsData&&(this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.futureNotificationsData.nextFutureRequestTimestamp=n.length>0?parseInt(n[0].timestamp)+1:this.currentFutureRequestTimestamp,this._sanitizeFutureTimestamp(parseInt(t["server-timestamp"])));var r=i.ServerConfigurationManager.pageSize;if(n.length===r){this.getFutureNotificationsData=!1;var a=parseInt(n[r-1].timestamp);this._fetchNotificationsFromServerHelper(this.currentFutureRequestTimestamp.toString(),(a-1).toString())}else this.responseCallback(this.notificationResponseList),this.notificationResponseList.length=0,this.getFutureNotificationsData=!0,this.fetchingNotifications=!1,this._resetPollingFailure(),this.continueFetch&&(this.continueFetch=!1,this._triggerNotificationFetchOperation())}},{key:"onError",value:function(e){this.notificationResponseList.length=0,this.getFutureNotificationsData=!0,this.fetchingNotifications=!1;var t=!0;switch(e.errorCode){case"Unauthorized":this.errorCallback(e.errorCode),t=!1;break;case"UnSupported_Browser":case"Insufficient_Memory":case"UnSupported_Url_Scheme":case"UnSupported_Method_Type":case"Url_Hostname_Missing":case"Method_Type_Missing":case"InvalidRequest":this.errorCallback(e.errorCode),t=!1;break;case"Internal_Server_Error":case"Request_Not_Implemented":case"Bad_Gateway":case"Service_Unavailable":case"Gateway_Timeout":case"Server_Response_Error":this._handlePollingRequestFailure("ServerFailure");break;case"Network_Failure":this._handlePollingRequestFailure("NetworkFailure");break;case"Request_Timeout":this._handlePollingRequestFailure("Timeout");break;default:this._handlePollingRequestFailure("ClientFailure")}t&&this._triggerNotificationFetchOperation()}},{key:"cancelRequest",value:function(){this.unRegisterDevice()}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),a=c(n(13)),o=c(n(5)),s=c(n(12)),u=(c(n(4)),c(n(19)),c(n(1)));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.forceFetchNotificationsFromServer=function(){u.default.debug("PollCommunicationHandler: forceFetchNotificationsFromServer: Reached"),n.isFetchingNotifications?u.default.debug("PollCommunicationHandler: forceFetchNotificationsFromServer: Already fetching notifications ignoring"):n.timeoutFn&&(clearTimeout(n.timeoutFn),n.timeoutFn=null,u.default.debug("PollCommunicationHandler: forceFetchNotificationsFromServer: triggering to fetch notifications from server forcefully"),n.fetchNotificationsFromServer())},this.futureNotificationsData=t.futureNotificationsData,this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.responseCallback=t.responseCallback,this.getFutureNotificationsData=!0,this.errorCallback=t.errorCallback,this.notificationResponseList=new Array,this.longPollFailureFlag=!1,this.requestFailureTypeAndCount={},this.currentNetworkCommunicatorObj=null,this._initializeErrorTypeFailureCount(),this.isFetchingNotifications=!1,this.timeoutFn=null}return r(e,[{key:"_handleLongPollRequestFailure",value:function(e){if(!this.longPollFailureFlag){var t=0,n=0;switch(e){case"Timeout":n=++this.requestFailureTypeAndCount.timeoutFailureCount,t=o.default.TimeOutErrorCountLimit;break;case"ClientFailure":n=++this.requestFailureTypeAndCount.clientFailureCount,t=o.default.ClientErrorCountLimit;break;case"ServerFailure":n=++this.requestFailureTypeAndCount.serverFailureCount,t=o.default.ServerErrorCountLimit;break;case"NetworkFailure":n=++this.requestFailureTypeAndCount.internalNetworkFailureCount,t=o.default.InternalNetworkErrorCountLimit}n==t&&(u.default.warn("PollCommunicationHandler: _handleLongPollRequestFailure - LongPoll failures of type:",e," has reached its failure count limit. Adding delay in successive LongPolls(if failure persisits)"),this.longPollFailureFlag=!0,this._initializeErrorTypeFailureCount())}}},{key:"fetchNotificationsFromServer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1;a.default.isNELongPollEnabled()&&(n=!0);var r={},o=n?i.ServerConfigurationManager.serverLongPollUri:i.ServerConfigurationManager.serverShortPollUri;if(!(r=e||t?a.default.createNotificationGetRequest(o,t,e,n,!1):a.default.createNotificationGetRequest(o,"",this.futureNotificationsData.nextFutureRequestTimestamp.toString(),n,!0)))return u.default.warn("PollCommunicationHandler: fetchNotificationsFromServer - Unable to create httpRequest. Either AccessToken or AppID is not valid"),this.onError({errorCode:"InvalidRequest"});if(r.error)return this.onError(r);this.isFetchingNotifications=!0,u.default.debug("PollCommunicationHandler: fetchNotificationsFromServer: calling to fetch notifications from server"),r.request.responseCallback=this.onResponse.bind(this),r.request.errorCallback=this.onError.bind(this);var c=new s.default(r.request);c.SendRequest(r.requestData),this.currentNetworkCommunicatorObj=c}},{key:"_sanitizeFutureTimestamp",value:function(e){e&&this.futureNotificationsData.nextFutureRequestTimestamp-e>0&&(u.default.debug("PollCommunicationHandler: _sanitizeFutureTimestamp - Next Future timestamp value doesn't seem correct. Setting it to current servertimestamp value"),this.futureNotificationsData.nextFutureRequestTimestamp=e)}},{key:"_initializeErrorTypeFailureCount",value:function(){this.requestFailureTypeAndCount.timeoutFailureCount=0,this.requestFailureTypeAndCount.clientFailureCount=0,this.requestFailureTypeAndCount.serverFailureCount=0,this.requestFailureTypeAndCount.internalNetworkFailureCount=0}},{key:"_resetLongPollFailure",value:function(){this.longPollFailureFlag=!1,this._initializeErrorTypeFailureCount()}},{key:"_triggerNotificationFetchOperation",value:function(){var e=0;e=this.longPollFailureFlag?1e3*i.ServerConfigurationManager.pollingInterval:o.default.OneSecond,this.timeoutFn=setTimeout(this.fetchNotificationsFromServer.bind(this),e)}},{key:"onResponse",value:function(e){this.isFetchingNotifications=!1,u.default.debug("PollCommunicationHandler: onResponse - Notification:-> ",e);var t=JSON.parse(e),n=t.notifications.notification;this.notificationResponseList.push(t),this.getFutureNotificationsData&&(this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.futureNotificationsData.nextFutureRequestTimestamp=n.length>0?parseInt(n[0].timestamp)+1:this.currentFutureRequestTimestamp,this._sanitizeFutureTimestamp(parseInt(t["server-timestamp"])));var r=i.ServerConfigurationManager.pageSize;if(n.length===r){this.getFutureNotificationsData=!1;var a=parseInt(n[r-1].timestamp);this.fetchNotificationsFromServer(this.currentFutureRequestTimestamp.toString(),(a-1).toString())}else this.responseCallback(this.notificationResponseList),this.notificationResponseList.length=0,this.getFutureNotificationsData=!0,this._resetLongPollFailure(),this._triggerNotificationFetchOperation()}},{key:"onError",value:function(e){this.isFetchingNotifications=!1,u.default.debug("PollCommunicationHandler: onError received."),this.notificationResponseList.length=0,this.getFutureNotificationsData=!0;var t=!0;switch(e.errorCode){case"Unauthorized":this.errorCallback(e.errorCode),t=!1;break;case"UnSupported_Browser":case"Insufficient_Memory":case"UnSupported_Url_Scheme":case"UnSupported_Method_Type":case"Url_Hostname_Missing":case"Method_Type_Missing":case"InvalidRequest":this.errorCallback(e.errorCode),t=!1;break;case"Internal_Server_Error":case"Request_Not_Implemented":case"Bad_Gateway":case"Service_Unavailable":case"Gateway_Timeout":case"Server_Response_Error":this._handleLongPollRequestFailure("ServerFailure");break;case"Network_Failure":this._handleLongPollRequestFailure("NetworkFailure");break;case"Request_Timeout":this._handleLongPollRequestFailure("Timeout");break;default:this._handleLongPollRequestFailure("ClientFailure")}t&&this._triggerNotificationFetchOperation()}},{key:"cancelRequest",value:function(){this.currentNetworkCommunicatorObj&&this.currentNetworkCommunicatorObj.CancelRequest()}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(12)),a=c(n(4)),o=c(n(1)),s=c(n(5)),u=c(n(13));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"_handleNotificationPreferenceFetchResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.default.debug("NotificationPreferenceManager :: _handleNotificationPreferenceResponse ",e),a.default.sendMessageToApplet("NotificationPreferenceFetched",e,s.default.CCDCONTAINER_JS)}},{key:"_handleNotificationPreferenceSetResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.default.debug("NotificationPreferenceManager :: _handleNotificationPreferenceSetResponse ",e),a.default.sendMessageToApplet("NotificationPreferenceSet",e,s.default.CCDCONTAINER_JS)}},{key:"getPreference",value:function(e){o.default.debug("NotificationPreferenceManager :: getPreference data is ",e);var t={};if(t=u.default.createPreferencesGetRequest(e)){o.default.debug("NotificationPreferenceManager :: request to get notification preferences ",t.request),t.request.responseCallback=function(e){e=JSON.parse(e),this._handleNotificationPreferenceFetchResponse(e)}.bind(this),t.request.errorCallback=function(e){var t={};t.error=e,this._handleNotificationPreferenceFetchResponse(t),o.default.warn("NotificationPreferenceManager: GetNotificationPreferences - Error Occured  ",e)}.bind(this);var n=new i.default(t.request);n.SendRequest(t.requestData),this.currentNetworkCommunicatorObj=n}else{o.default.warn("NotificationPreferenceManager :: getPreference http request creation failed");var r={error:{statusCode:"HTTP request creation failed",errorCode:"Failed to get http request"}};this._handleNotificationPreferenceFetchResponse(r)}}},{key:"setPreference",value:function(e){o.default.debug("NotificationPreferenceManager :: setPreference data is ",e);var t={};if(t=u.default.createPreferencesSetRequest(e)){o.default.debug("NotificationPreferenceManager :: request to set notification preferences ",t.request),t.request.responseCallback=function(e){e=JSON.parse(e),this._handleNotificationPreferenceSetResponse(e)}.bind(this),t.request.errorCallback=function(e){var t={};t.error=e,this._handleNotificationPreferenceSetResponse(t),o.default.error("NotificationPreferenceManager :: SetPreferences - Error Occured ",e)}.bind(this);var n=new i.default(t.request);n.SendRequest(t.requestData),this.currentNetworkCommunicatorObj=n}else{o.default.warn("NotificationPreferenceManager :: setPreference http request creation failed");var r={error:{statusCode:"HTTP request creation failed",errorCode:"Failed to get http request"}};this._handleNotificationPreferenceSetResponse(r)}}}]),e}();t.default=l},function(e,t,n){"use strict";(function(e){if(e._babelPolyfill)throw new Error("only one instance of babel/polyfill is allowed");e._babelPolyfill=!0,n(56),n(98)}).call(t,n(29))},function(e,t,n){"use strict";n(57),e.exports=n(0).core},function(e,t,n){"use strict";n(58),n(61),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(89),n(92),n(93),n(94),n(95),n(96),e.exports=n(0).core},function(e,t,n){"use strict";var r=n(0),i=n(6).set,a=n(9),o=n(2),s=n(60),u=r.has,c=r.hide,l=r.getNames,f=r.toObject,d=r.g.Symbol,h=d,p=!1,g=a.safe("tag"),v={},y={};function b(e){var t=y[e]=r.set(r.create(d.prototype),g,e);return r.DESC&&p&&r.setDesc(Object.prototype,e,{configurable:!0,set:function(t){c(this,e,t)}}),t}r.isFunction(d)||c((d=function e(t){if(this instanceof e)throw TypeError("Symbol is not a constructor");return b(a(t))}).prototype,"toString",function(){return this[g]}),o(o.G+o.W,{Symbol:d});var m={for:function(e){return u(v,e+="")?v[e]:v[e]=d(e)},keyFor:function(e){return s(v,e)},pure:a.safe,set:r.set,useSetter:function(){p=!0},useSimple:function(){p=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=n(8)(e);m[e]=d===h?t:b(t)}),p=!0,o(o.S,"Symbol",m),o(o.S+o.F*(d!=h),"Object",{getOwnPropertyNames:function(e){for(var t,n=l(f(e)),r=[],i=0;n.length>i;)u(y,t=n[i++])||r.push(t);return r},getOwnPropertySymbols:function(e){for(var t,n=l(f(e)),r=[],i=0;n.length>i;)u(y,t=n[i++])&&r.push(y[t]);return r}}),i(d,"Symbol"),i(Math,"Math",!0),i(r.g.JSON,"JSON",!0)},function(e,t,n){"use strict";e.exports=function(e){return e.FW=!0,e.path=e.g,e}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){for(var n,i=r.toObject(e),a=r.getKeys(i),o=a.length,s=0;o>s;)if(i[n=a[s++]]===t)return n}},function(e,t,n){"use strict";var r=n(2);r(r.S,"Object",{assign:n(62)})},function(e,t,n){"use strict";var r=n(0);e.exports=Object.assign||function(e,t){for(var n=Object(r.assertDefined(e)),i=arguments.length,a=1;i>a;)for(var o,s=r.ES5Object(arguments[a++]),u=r.getKeys(s),c=u.length,l=0;c>l;)n[o=u[l++]]=s[o];return n}},function(e,t,n){"use strict";var r=n(2);r(r.S,"Object",{is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})},function(e,t,n){"use strict";var r=n(2);r(r.S,"Object",{setPrototypeOf:n(30).set})},function(e,t,n){"use strict";var r=n(0),i=n(6),a={};a[n(8)("toStringTag")]="z",r.FW&&"z"!=i(a)&&r.hide(Object.prototype,"toString",function(){return"[object "+i.classof(this)+"]"})},function(e,t,n){"use strict";var r=n(0),i=n(2),a=r.isObject,o=r.toObject;function s(e,t){var n=(r.core.Object||{})[e]||Object[e],s=0,u={};u[e]=1==t?function(e){return a(e)?n(e):e}:2==t?function(e){return!a(e)||n(e)}:3==t?function(e){return!!a(e)&&n(e)}:4==t?function(e,t){return n(o(e),t)}:5==t?function(e){return n(Object(r.assertDefined(e)))}:function(e){return n(o(e))};try{n("z")}catch(e){s=1}i(i.S+i.F*s,"Object",u)}s("freeze",1),s("seal",1),s("preventExtensions",1),s("isFrozen",2),s("isSealed",2),s("isExtensible",3),s("getOwnPropertyDescriptor",4),s("getPrototypeOf",5),s("keys"),s("getOwnPropertyNames")},function(e,t,n){"use strict";var r=n(0),i=r.setDesc,a=Function.prototype;"name"in a||r.FW&&r.DESC&&i(a,"name",{configurable:!0,get:function(){var e=String(this).match(/^\s*function ([^ (]*)/),t=e?e[1]:"";return r.has(this,"name")||i(this,"name",r.desc(5,t)),t},set:function(e){r.has(this,"name")||i(this,"name",r.desc(0,e))}})},function(e,t,n){"use strict";var r=n(0),i=r.isObject,a=r.isFunction,o=r.g.Number,s=o,u=o.prototype;function c(e){if(i(e)&&(e=function(e){var t,n;if(a(t=e.valueOf)&&!i(n=t.call(e)))return n;if(a(t=e.toString)&&!i(n=t.call(e)))return n;throw TypeError("Can't convert object to number")}(e)),"string"==typeof e&&e.length>2&&48==e.charCodeAt(0)){var t=!1;switch(e.charCodeAt(1)){case 66:case 98:t=!0;case 79:case 111:return parseInt(e.slice(2),t?2:8)}}return+e}!r.FW||o("0o1")&&o("0b1")||(o=function e(t){return this instanceof e?new s(c(t)):c(t)},r.each.call(r.DESC?r.getNames(s):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(e){r.has(s,e)&&!r.has(o,e)&&r.setDesc(o,e,r.getDesc(s,e))}),o.prototype=u,u.constructor=o,r.hide(r.g,"Number",o))},function(e,t,n){"use strict";var r=n(0),i=n(2),a=Math.abs,o=Math.floor,s=r.g.isFinite;function u(e){return!r.isObject(e)&&s(e)&&o(e)===e}i(i.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function(e){return"number"==typeof e&&s(e)},isInteger:u,isNaN:function(e){return e!=e},isSafeInteger:function(e){return u(e)&&a(e)<=9007199254740991},MAX_SAFE_INTEGER:9007199254740991,MIN_SAFE_INTEGER:-9007199254740991,parseFloat:parseFloat,parseInt:parseInt})},function(e,t,n){"use strict";var r=n(2),i=Math.E,a=Math.pow,o=Math.abs,s=Math.exp,u=Math.log,c=Math.sqrt,l=Math.ceil,f=Math.floor,d=a(2,-52),h=a(2,-23),p=a(2,127)*(2-h),g=a(2,-126);function v(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}function y(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:s(e)-1}r(r.S,"Math",{acosh:function(e){return(e=+e)<1?NaN:isFinite(e)?u(e/i+c(e+1)*c(e-1)/i)+1:e},asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):u(t+c(t*t+1)):t},atanh:function(e){return 0==(e=+e)?e:u((1+e)/(1-e))/2},cbrt:function(e){return v(e=+e)*a(o(e),1/3)},clz32:function(e){return(e>>>=0)?31-f(u(e+.5)*Math.LOG2E):32},cosh:function(e){return(s(e=+e)+s(-e))/2},expm1:y,fround:function(e){var t,n,r=o(e),i=v(e);return r<g?i*function(e){return e+1/d-1/d}(r/g/h)*g*h:(n=(t=(1+h/d)*r)-(t-r))>p||n!=n?i*(1/0):i*n},hypot:function(e,t){for(var n,r=0,i=arguments.length,o=i,s=Array(i),u=-1/0;i--;){if((n=s[i]=+arguments[i])==1/0||n==-1/0)return 1/0;n>u&&(u=n)}for(u=n||1;o--;)r+=a(s[o]/u,2);return u*c(r)},imul:function(e,t){var n=+e,r=+t,i=65535&n,a=65535&r;return 0|i*a+((65535&n>>>16)*a+i*(65535&r>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:u(1+e)},log10:function(e){return u(e)/Math.LN10},log2:function(e){return u(e)/Math.LN2},sign:v,sinh:function(e){return o(e=+e)<1?(y(e)-y(-e))/2:(s(e-1)-s(-e-1))*(i/2)},tanh:function(e){var t=y(e=+e),n=y(-e);return t==1/0?1:n==1/0?-1:(t-n)/(s(e)+s(-e))},trunc:function(e){return(e>0?f:l)(e)}})},function(e,t,n){"use strict";var r=n(2),i=n(0).toIndex,a=String.fromCharCode;r(r.S,"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(0),i=n(2);i(i.S,"String",{raw:function(e){for(var t=r.toObject(e.raw),n=r.toLength(t.length),i=arguments.length,a=[],o=0;n>o;)a.push(String(t[o++])),o<i&&a.push(String(arguments[o]));return a.join("")}})},function(e,t,n){"use strict";var r=n(0).set,i=n(31)(!0),a=n(9).safe("iter"),o=n(11),s=o.step;o.std(String,"String",function(e){r(this,a,{o:String(e),i:0})},function(){var e,t=this[a],n=t.o,r=t.i;return r>=n.length?s(1):(e=i.call(n,r),t.i+=e.length,s(0,e))})},function(e,t,n){"use strict";var r=n(2);r(r.P,"String",{codePointAt:n(31)(!1)})},function(e,t,n){"use strict";var r=n(0),i=n(6),a=n(2),o=r.toLength;a(a.P,"String",{endsWith:function(e){if("RegExp"==i(e))throw TypeError();var t=String(r.assertDefined(this)),n=arguments[1],a=o(t.length),s=void 0===n?a:Math.min(o(n),a);return e+="",t.slice(s-e.length,s)===e}})},function(e,t,n){"use strict";var r=n(0),i=n(6),a=n(2);a(a.P,"String",{includes:function(e){if("RegExp"==i(e))throw TypeError();return!!~String(r.assertDefined(this)).indexOf(e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(2);i(i.P,"String",{repeat:function(e){var t=String(r.assertDefined(this)),n="",i=r.toInteger(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}})},function(e,t,n){"use strict";var r=n(0),i=n(6),a=n(2);a(a.P,"String",{startsWith:function(e){if("RegExp"==i(e))throw TypeError();var t=String(r.assertDefined(this)),n=r.toLength(Math.min(arguments[1],t.length));return e+="",t.slice(n,n+e.length)===e}})},function(e,t,n){"use strict";var r=n(0),i=n(10),a=n(2),o=n(11),s=o.stepCall;a(a.S+a.F*!n(20)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,u,c=Object(r.assertDefined(e)),l=arguments[1],f=void 0!==l,d=f?i(l,arguments[2],2):void 0,h=0;if(o.is(c))for(u=o.get(c),n=new("function"==typeof this?this:Array);!(a=u.next()).done;h++)n[h]=f?s(u,d,[a.value,h],!0):a.value;else for(n=new("function"==typeof this?this:Array)(t=r.toLength(c.length));t>h;h++)n[h]=f?d(c[h],h):c[h];return n.length=h,n}})},function(e,t,n){"use strict";var r=n(2);r(r.S,"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)n[e]=arguments[e++];return n.length=t,n}})},function(e,t,n){"use strict";n(15)(Array)},function(e,t,n){"use strict";var r=n(0),i=n(14),a=n(9).safe("iter"),o=n(11),s=o.step,u=o.Iterators;o.std(Array,"Array",function(e,t){r.set(this,a,{o:r.toObject(e),i:0,k:t})},function(){var e=this[a],t=e.o,n=e.k,r=e.i++;return!t||r>=t.length?(e.o=void 0,s(1)):s(0,"key"==n?r:"value"==n?t[r]:[r,t[r]])},"value"),u.Arguments=u.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";var r=n(0),i=n(2),a=r.toIndex;i(i.P,"Array",{copyWithin:function(e,t){var n=Object(r.assertDefined(this)),i=r.toLength(n.length),o=a(e,i),s=a(t,i),u=arguments[2],c=void 0===u?i:a(u,i),l=Math.min(c-s,i-o),f=1;for(s<o&&o<s+l&&(f=-1,s=s+l-1,o=o+l-1);l-- >0;)s in n?n[o]=n[s]:delete n[o],o+=f,s+=f;return n}}),n(14)("copyWithin")},function(e,t,n){"use strict";var r=n(0),i=n(2),a=r.toIndex;i(i.P,"Array",{fill:function(e){for(var t=Object(r.assertDefined(this)),n=r.toLength(t.length),i=a(arguments[1],n),o=arguments[2],s=void 0===o?n:a(o,n);s>i;)t[i++]=e;return t}}),n(14)("fill")},function(e,t,n){"use strict";var r=n(2);r(r.P,"Array",{find:n(21)(5)}),n(14)("find")},function(e,t,n){"use strict";var r=n(2);r(r.P,"Array",{findIndex:n(21)(6)}),n(14)("findIndex")},function(e,t,n){"use strict";var r=n(0),i=n(6),a=r.g.RegExp,o=a,s=a.prototype;r.FW&&r.DESC&&(function(){try{return"/a/i"==a(/a/g,"i")}catch(e){}}()||(a=function(e,t){return new o("RegExp"==i(e)&&void 0!==t?e.source:e,t)},r.each.call(r.getNames(o),function(e){e in a||r.setDesc(a,e,{configurable:!0,get:function(){return o[e]},set:function(t){o[e]=t}})}),s.constructor=a,a.prototype=s,r.hide(r.g,"RegExp",a)),"g"!=/./g.flags&&r.setDesc(s,"flags",{configurable:!0,get:n(88)(/^.*\/(\w*)$/,"$1")})),n(15)(a)},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(n?t:this).replace(e,r)}}},function(e,t,n){"use strict";var r,i=n(0),a=n(10),o=n(6),s=n(2),u=n(7),c=n(11),l=n(8)("species"),f=n(9).safe("record"),d=c.forOf,h="Promise",p=i.g,g=p.process,v=g&&g.nextTick||n(90).set,y=p[h],b=y,m=i.isFunction,_=i.isObject,C=u.fn,k=u.obj;function S(e){var t=k(e)[l];return void 0!=t?t:e}function N(e){var t;return _(e)&&(t=e.then),!!m(t)&&t}function D(e){var t,n=e[f],r=n.c,i=0;if(n.h)return!1;for(;r.length>i;)if((t=r[i++]).fail||!D(t.P))return!1;return!0}function R(e,t){var n=e.c;(t||n.length)&&v(function(){var r=e.p,i=e.v,a=1==e.s,s=0;if(t&&D(r))setTimeout(function(){D(r)&&("process"==o(g)?g.emit("unhandledRejection",i,r):p.console&&m(console.error)&&console.error("Unhandled promise rejection",i))},1e3);else for(;n.length>s;)!function(t){var n,r,o=a?t.ok:t.fail;try{o?(a||(e.h=!0),(n=!0===o?i:o(i))===t.P?t.rej(TypeError(h+"-chain cycle")):(r=N(n))?r.call(n,t.res,t.rej):t.res(n)):t.rej(i)}catch(e){t.rej(e)}}(n[s++]);n.length=0})}function O(e){var t=this;t.d||(t.d=!0,(t=t.r||t).v=e,t.s=2,R(t,!0))}function w(e){var t,n,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(t=N(e))?(n={r:r,d:!1},t.call(e,a(w,n,1),a(O,n,1))):(r.v=e,r.s=1,R(r))}catch(e){O.call(n||{r:r,d:!1},e)}}}m(y)&&m(y.resolve)&&y.resolve(r=new y(function(){}))==r||(y=function(e){C(e);var t={p:u.inst(this,y,h),c:[],s:0,d:!1,v:void 0,h:!1};i.hide(this,f,t);try{e(a(w,t,1),a(O,t,1))}catch(e){O.call(t,e)}},i.mix(y.prototype,{then:function(e,t){var n=k(k(this).constructor)[l],r={ok:!m(e)||e,fail:!!m(t)&&t},i=r.P=new(void 0!=n?n:y)(function(e,t){r.res=C(e),r.rej=C(t)}),a=this[f];return a.c.push(r),a.s&&R(a),i},catch:function(e){return this.then(void 0,e)}})),s(s.G+s.W+s.F*(y!=b),{Promise:y}),o.set(y,h),n(15)(y),s(s.S,h,{reject:function(e){return new(S(this))(function(t,n){n(e)})},resolve:function(e){return _(e)&&f in e&&i.getProto(e)===this.prototype?e:new(S(this))(function(t){t(e)})}}),s(s.S+s.F*!n(20)(function(e){y.all(e).catch(function(){})}),h,{all:function(e){var t=S(this),n=[];return new t(function(r,a){d(e,!1,n.push,n);var o=n.length,s=Array(o);o?i.each.call(n,function(e,n){t.resolve(e).then(function(e){s[n]=e,--o||r(s)},a)}):r(s)})},race:function(e){var t=S(this);return new t(function(n,r){d(e,!1,function(e){t.resolve(e).then(n,r)})})}})},function(e,t,n){"use strict";var r,i,a,o=n(0),s=n(10),u=n(6),c=n(91),l=o.g,f=o.isFunction,d=o.html,h=l.document,p=l.process,g=l.setImmediate,v=l.clearImmediate,y=l.postMessage,b=l.addEventListener,m=l.MessageChannel,_=0,C={};function k(){var e=+this;if(o.has(C,e)){var t=C[e];delete C[e],t()}}function S(e){k.call(e.data)}f(g)&&f(v)||(g=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return C[++_]=function(){c(f(e)?e:Function(e),t)},r(_),_},v=function(e){delete C[e]},"process"==u(p)?r=function(e){p.nextTick(s(k,e,1))}:b&&f(y)&&!l.importScripts?(r=function(e){y(e,"*")},b("message",S,!1)):f(m)?(a=(i=new m).port2,i.port1.onmessage=S,r=s(a.postMessage,a,1)):r=h&&"onreadystatechange"in h.createElement("script")?function(e){d.appendChild(h.createElement("script")).onreadystatechange=function(){d.removeChild(this),k.call(e)}}:function(e){setTimeout(s(k,e,1),0)}),e.exports={set:g,clear:v}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return r?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(32);n(16)("Map",{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(32);n(16)("Set",{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(0),i=n(33),a=i.leakStore,o=i.ID,s=i.WEAK,u=r.has,c=r.isObject,l=Object.isFrozen||r.core.Object.isFrozen,f={},d=n(16)("WeakMap",{get:function(e){if(c(e)){if(l(e))return a(this).get(e);if(u(e,s))return e[s][this[o]]}},set:function(e,t){return i.def(this,e,t)}},i,!0,!0);r.FW&&7!=(new d).set((Object.freeze||Object)(f),7).get(f)&&r.each.call(["delete","has","get","set"],function(e){var t=d.prototype[e];d.prototype[e]=function(n,r){if(c(n)&&l(n)){var i=a(this)[e](n,r);return"set"==e?this:i}return t.call(this,n,r)}})},function(e,t,n){"use strict";var r=n(33);n(16)("WeakSet",{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(2),a=n(30),o=n(11),s=n(9).safe("iter"),u=o.step,c=n(7),l=r.isObject,f=r.getDesc,d=r.setDesc,h=r.getProto,p=Function.apply,g=c.obj,v=Object.isExtensible||r.it;function y(e){var t,n=[];for(t in e)n.push(t);r.set(this,s,{o:e,a:n,i:0})}function b(e){return function(t){g(t);try{return e.apply(void 0,arguments),!0}catch(e){return!1}}}o.create(y,"Object",function(){var e,t=this[s],n=t.a;do{if(t.i>=n.length)return u(1)}while(!((e=n[t.i++])in t.o));return u(0,e)});var m={apply:n(10)(Function.call,p,3),construct:function(e,t){var n=c.fn(arguments.length<3?e:arguments[2]).prototype,i=r.create(l(n)?n:Object.prototype),a=p.call(e,i,t);return l(a)?a:i},defineProperty:b(d),deleteProperty:function(e,t){var n=f(g(e),t);return!(n&&!n.configurable)&&delete e[t]},enumerate:function(e){return new y(g(e))},get:function e(t,n){var i,a=arguments.length<3?t:arguments[2],o=f(g(t),n);return o?r.has(o,"value")?o.value:void 0===o.get?void 0:o.get.call(a):l(i=h(t))?e(i,n,a):void 0},getOwnPropertyDescriptor:function(e,t){return f(g(e),t)},getPrototypeOf:function(e){return h(g(e))},has:function(e,t){return t in e},isExtensible:function(e){return!!v(g(e))},ownKeys:n(97),preventExtensions:b(Object.preventExtensions||r.it),set:function e(t,n,i){var a,o,s=arguments.length<4?t:arguments[3],u=f(g(t),n);if(!u){if(l(o=h(t)))return e(o,n,i,s);u=r.desc(0)}return r.has(u,"value")?!(!1===u.writable||!l(s)||((a=f(s,n)||r.desc(0)).value=i,d(s,n,a),0)):void 0!==u.set&&(u.set.call(s,i),!0)}};a&&(m.setPrototypeOf=function(e,t){a.check(e,t);try{return a.set(e,t),!0}catch(e){return!1}}),i(i.G,{Reflect:{}}),i(i.S,"Reflect",m)},function(e,t,n){"use strict";var r=n(0),i=n(7).obj;e.exports=function(e){return i(e),r.getSymbols?r.getNames(e).concat(r.getSymbols(e)):r.getNames(e)}},function(e,t,n){"use strict";(function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var r,i=Object.prototype.hasOwnProperty,a="function"==typeof Symbol&&Symbol.iterator||"@@iterator",o="object"===n(t),s=e.regeneratorRuntime;if(s)o&&(t.exports=s);else{(s=e.regeneratorRuntime=o?t.exports:{}).wrap=p;var u="suspendedStart",c="suspendedYield",l="executing",f="completed",d={},h=y.prototype=b.prototype;v.prototype=h.constructor=y,y.constructor=v,v.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return e.__proto__=y,e.prototype=Object.create(h),e},s.async=function(e,t,n,r){return new Promise(function(i,a){var o=p(e,t,n,r),s=c.bind(o.next),u=c.bind(o.throw);function c(e){var t=g(this,null,e);if("throw"!==t.type){var n=t.arg;n.done?i(n.value):Promise.resolve(n.value).then(s,u)}else a(t.arg)}s()})},h[a]=function(){return this},h.toString=function(){return"[object Generator]"},s.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},s.values=k,C.prototype={constructor:C,reset:function(){this.prev=0,this.next=0,this.sent=r,this.done=!1,this.delegate=null,this.tryEntries.forEach(_);for(var e,t=0;i.call(this,e="t"+t)||t<20;++t)this[e]=null},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?this.next=a.finallyLoc:this.complete(o),d},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc)}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},d}}}function p(e,t,n,r){return new b(e,t,n||null,r||[])}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function v(){}function y(){}function b(e,t,n,i){var a=t?Object.create(t.prototype):this,o=new C(i),s=u;function h(t,i){if(s===l)throw new Error("Generator is already running");if(s===f)return S();for(;;){var a=o.delegate;if(a){var h;if("throw"===(h=g(a.iterator[t],a.iterator,i)).type){o.delegate=null,t="throw",i=h.arg;continue}if(t="next",i=r,!(p=h.arg).done)return s=c,p;o[a.resultName]=p.value,o.next=a.nextLoc,o.delegate=null}if("next"===t){if(s===u&&void 0!==i)throw new TypeError("attempt to send "+JSON.stringify(i)+" to newborn generator");s===c?o.sent=i:delete o.sent}else if("throw"===t){if(s===u)throw s=f,i;o.dispatchException(i)&&(t="next",i=r)}else"return"===t&&o.abrupt("return",i);if(s=l,"normal"===(h=g(e,n,o)).type){s=o.done?f:c;var p={value:h.arg,done:o.done};if(h.arg!==d)return p;o.delegate&&"next"===t&&(i=r)}else"throw"===h.type&&(s=f,"next"===t?o.dispatchException(h.arg):i=h.arg)}}return a.next=h.bind(a,"next"),a.throw=h.bind(a,"throw"),a.return=h.bind(a,"return"),a}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset()}function k(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:r,done:!0}}}("object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof window?"undefined":n(window))?window:void 0)}).call(t,n(29),n(99)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=a(n(22)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}window.logLevel=4;var o=new r.default({applicationContext:{appID:"CCHomeWeb1",imsClientID:"CCHomeWeb1",deviceID:"",locale:"en_US",env:"local",uiEnabled:!0,notificationUpdateCallbackFn:function(e){console.log("notificationUpdateCallbackFn received: ",e);var t=e.data.payload;t.timeline.content="<div> <a clickAction='panelSwitch' panelName = 'Apps'>UpdatedPanelSwitchAction </a> liked your project <b> The rising star of Andromada</b>.<a href = 'https://www.adobe.com'>Vin Diesel </a> liked your project <b> The rising star of Andromada</b>.<a href = 'https://www.adobe.com'>Vin Diesel </a> liked your project <b> The rising star of Andromada</b>.</div>",setTimeout(function(){o.UpdateNotificationContent({id:e.data.id,payload:JSON.stringify(t)}),t.timeline.content=""},1e4)},uiConfig:{surface:"Web",cssOverride:"true",cssPath:"https://swcdn.adobe.com/css",theme:"light",el:"#notificationIcon"},analyticsConfig:{},userProfile:{account_type:"type1",first_name:"Ankit",email:"anksinha+paid@adobetest.com",displayName:"Ankit Sinha",last_name:"Sinha",token_type:"bearer",userId:"D33F7078535612E40A490D36@AdobeID",countryCode:"US",name:"Ankit Sinha",access_token:"eyJ4NXUiOiJpbXNfbmExLXN0ZzEta2V5LTEuY2VyIiwiYWxnIjoiUlMyNTYifQ.eyJpZCI6IjE1NDA4MDUzOTI5MTRfYWE1MjE3MzktNzYzZC00NDFjLWIyZWEtZWFmMGE4OGM0NjMyX3VlMSIsImNsaWVudF9pZCI6IkNDSG9tZVdlYjEiLCJ1c2VyX2lkIjoiRDMzRjcwNzg1MzU2MTJFNDBBNDkwRDM2QEFkb2JlSUQiLCJzdGF0ZSI6IiIsInR5cGUiOiJhY2Nlc3NfdG9rZW4iLCJhcyI6Imltcy1uYTEtc3RnMSIsImZnIjoiUzRMM1Q2UjRXWDdHNzU3RE5YTE5PU0lBVFU9PT09PT0iLCJzaWQiOiIxNTQwODA1MzkyOTE0XzEyMWE1NjA0LTY3ZjYtNGVkNC04MjliLWY3ZmQyNzYxODc3M191ZTEiLCJtb2kiOiIyMDE4Zjk2NCIsImMiOiJEMkthNUxzU0hiL0dTdkZ1SmJBQ3l3PT0iLCJleHBpcmVzX2luIjoiODY0MDAwMDAiLCJzY29wZSI6IkFkb2JlSUQsb3BlbmlkLGduYXYsY3JlYXRpdmVfY2xvdWQscmVhZF9vcmdhbml6YXRpb25zLGNyZWF0aXZlX3NkayxhZGRpdGlvbmFsX2luZm8uc2NyZWVuX25hbWUsc2FvLmNjcHJpdmF0ZSx0a19wbGF0Zm9ybSIsImNyZWF0ZWRfYXQiOiIxNTQwODA1MzkyOTE0In0.HET9LL-YBOz949FmnJIiFsBlGBpVNdLSQr-XJDVhe8ZIItAD8rwid5aBPlVLhEDUhgUR0eorLYMM2UZJfsNuGG3GwINA2rhIh-46hmeRRkYjYdL-_s6JWhiVha_-s0yJl5SSjODN0lgDMjaPkzFxG736ZqmoJKtte7_UKK4aDFHtGX7MzlqF_dw4D_wfmWX1qoEcjk54kA42jQv2M4W_HXqhPxPSjmB7hpVtN9OHcpHpxLuZPqspt7zbKh24mRNo8-RVeisj08KUX-WQfB9jQ0Yg4CUYqO5WHIjKyWGK5zst7KYvdE1kakezwJQcNCj0B7pAYxrm2Nq9HjxtSnuXtA"},namespaces:{UpdateBadge:"com.notification.updateBadge",ShowOSTray:"com.notification.osToast"}},callback:function(e,t){i.default.debug("Namespace: ",e,"Notification object: ",t)}})}]);